{"version":3,"sources":["containers/BurgerBuilder/BurgerBuilder.tsx","axios-orders.tsx","shared/getTotalPrice.tsx","shared/updatePurchasable.tsx","HOCs/withErrorHandler.tsx","../node_modules/immer/dist/immer.module.js"],"names":["BurgerDisplay","lazy","__webpack_require__","e","then","bind","BuildControls","Modal","Promise","all","OrderSummary","BurgerBuilder","state","ingredients","totalPrice","purchasable","purchasing","loading","orders","error","ingredientIncreaseHandler","type","_this","nextState","produce","draft","getTotalPrice","updatePurchasable","setState","ingredientDecreaseHandler","purchaseStartHandler","purchaseCancelHandler","purchaseContinueHandler","newQueryString","Object","entries","map","_ref","_ref2","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","igKey","igVal","concat","encodeURIComponent","join","props","history","push","pathname","search","fetchIngredients","_callee","response","newIngredients","newTotalPrice","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","axios","get","sent","data","t0","stop","this","offline","bacon","cheese","meat","salad","burger","react__WEBPACK_IMPORTED_MODULE_9___default","createElement","_components_Retry_Retry__WEBPACK_IMPORTED_MODULE_11__","retryHandler","mainMessage","additionalMessage","style","color","cursor","onClick","_components_UI_Loader_Loader__WEBPACK_IMPORTED_MODULE_12__","orderSummary","Fragment","Suspense","fallback","price","increase","decrease","purchaseStart","totalCost","purchaseCancel","purchaseContinue","show","hider","Component","withErrorHandler","axios__WEBPACK_IMPORTED_MODULE_0__","axiosOrderInstance","n","create","baseURL","INGREDIENT_PRICES","base","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","reduce","acc","val","toFixed","values","some","d","__webpack_exports__","WrappedComponent","_Component","WithErrorHandler","_getPrototypeOf2","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_len","arguments","length","args","Array","_key","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","apply","req","res","errorConfirmed","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","_this2","interceptors","request","use","eject","react__WEBPACK_IMPORTED_MODULE_5___default","message","process","_typeof","Symbol","iterator","obj","constructor","prototype","generatePatches","basepath","patches","inversePatches","baseValue","resultValue","isArray","shared","Math","min","i","assigned","path","op","_i","_path","_i2","_path2","generateArrayPatches","each","assignedValue","origValue","generateObjectPatches","NOTHING","defineProperty","enumerable","configurable","writable","PROXY_STATE","RETURNED_AND_MODIFIED_ERROR","autoFreeze","name","useProxies","Proxy","Reflect","isProxy","isProxyable","proto","getPrototypeOf","assign","target","has","shallowCopy","slice","undefined","__proto__","cb","thing","prop","hasOwnProperty","finalize","modified","finalized","copy","result","_generatePatches","freeze","finalizeObject","finalizeNonProxiedObject","parent","isFrozen","child","is","x","y","proxies","objectTraps","createProxy","_value","source","ownKeys","set","isUnchanged","markChanged","deleteProperty","getOwnPropertyDescriptor","owner","descriptor","Error","setPrototypeOf","arrayTraps","parentState","createState","proxy","revocable","fn","isNaN","parseInt","descriptors","states","source$1","hasCopy","markChanged$1","prepareCopy","createProxy$1","assertUnfinished","finalizing","_get","_set","finished","createState$1","JSON","stringify","hasObjectChanges","keys","hasArrayChanges","produceEs5","baseState","producer","patchListener","prevStates","rootProxy","returnValue","_","markChangesRecursively","object","forEach","markChangesSweep","initialState","recipe","normalizeResult","_returnValue","previousProxies","p","revoke","produceProxy","patch","_i3"],"mappings":"iPAYMA,EAAgBC,eAAK,kBACzBC,EAAAC,EAAA,GAAAC,KAAAF,EAAAG,KAAA,aAGIC,EAAgBL,eAAK,kBACzBC,EAAAC,EAAA,GAAAC,KAAAF,EAAAG,KAAA,aAGIE,EAAQN,eAAK,kBACjBO,QAAAC,IAAA,CAAAP,EAAAC,EAAA,GAAAD,EAAAC,EAAA,KAAAC,KAAAF,EAAAG,KAAA,YAEIK,EAAeT,eAAK,kBACxBC,EAAAC,EAAA,IAAAC,KAAAF,EAAAG,KAAA,aA4EIM,6MAKGC,MAA6B,CAClCC,YAAa,KACbC,WAAY,IACZC,aAAa,EACbC,YAAY,EACZC,SAAS,EACTC,OAAQ,GACRC,MAAO,QAUFC,0BAA4B,SAACC,GAClC,GAAKC,EAAKV,MAAMC,YAAhB,CAGA,IAAMU,EAAYC,YAAQF,EAAKV,MAAO,SAAAa,GAIpCA,EAAMZ,YAAaQ,IAAS,EAC5BI,EAAMX,WAAaY,YAAcD,EAAMZ,aACvCY,EAAMV,YAAcY,YAAkBF,EAAMZ,eAE9CS,EAAKM,SAASL,OAETM,0BAA4B,SAACR,GAClC,GAAKC,EAAKV,MAAMC,YAAhB,CAGA,IAAMU,EAAYC,YAAQF,EAAKV,MAAO,SAAAa,GAIpCA,EAAMZ,YAAaQ,IAAS,EAC5BI,EAAMX,WAAaY,YAAcD,EAAMZ,aACvCY,EAAMV,YAAcY,YAAkBF,EAAMZ,eAE9CS,EAAKM,SAASL,OAGTO,qBAAuB,WAC5BR,EAAKM,SAAS,CAAEZ,YAAY,OAEvBe,sBAAwB,WAC7BT,EAAKM,SAAS,CAAEZ,YAAY,OAEvBgB,wBAA0B,WAC/B,GAAKV,EAAKV,MAAMC,YAAhB,CAGA,IAAMoB,EAAkBC,OAAOC,QAAQb,EAAKV,MAAMC,aAG/CuB,IAAI,SAAAC,GAAA,IAAAC,EAAAJ,OAAAK,EAAA,EAAAL,CAAAG,EAAA,GAAEG,EAAFF,EAAA,GAASG,EAATH,EAAA,YAAAI,OAAwBC,mBAAmBH,GAA3C,KAAAE,OAAqDD,KACzDG,KAAK,KAERtB,EAAKuB,MAAMC,QAAQC,KAAK,CACtBC,SAAU,YACVC,OAAQ,IAAMhB,QAoEViB,sCAAmB,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACzBtC,EAAKM,SAAS,CAAET,MAAO,OADEuC,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAG6BC,IAAMC,IACxD,qBAJqB,OAGjBV,EAHiBM,EAAAK,KAMTV,EAAmBD,EAAzBY,KACFV,EAAgB5B,YAAc2B,GACpC/B,EAAKM,SAAS,CACZf,YAAawC,EACbtC,YAAaY,YAAkB0B,GAC/BvC,WAAYwC,IAXSI,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAevBpC,EAAKM,SAAS,CACZT,MAAKuC,EAAAO,KAhBgB,yBAAAP,EAAAQ,SAAAf,EAAAgB,KAAA,eAoBnBC,QAAU,WAChB9C,EAAKM,SAAS,CACZT,OAAO,EACPN,YAAa,CACXwD,MAAO,EACPC,OAAQ,EACRC,KAAM,EACNC,MAAO,GAET1D,WAAY,0FAnJdqD,KAAKjB,oDAuDL,IAAIuB,EAASN,KAAKvD,MAAMO,MACtBuD,EAAAlB,EAAAmB,cAACC,EAAA,EAAD,CACEC,aAAcV,KAAKjB,iBACnB4B,YAAY,sCACZC,kBACEL,EAAAlB,EAAAmB,cAAA,QACEK,MAAO,CAAEC,MAAO,OAAQC,OAAQ,WAChCC,QAAShB,KAAKC,SAFhB,2BASJM,EAAAlB,EAAAmB,cAACS,EAAA,EAAD,MAGEC,EAAe,KAoCnB,OAlCIlB,KAAKvD,MAAMC,cACb4D,EACEC,EAAAlB,EAAAmB,cAAAD,EAAAlB,EAAA8B,SAAA,KACEZ,EAAAlB,EAAAmB,cAACD,EAAAlB,EAAM+B,SAAP,CAAgBC,SAAUd,EAAAlB,EAAAmB,cAACS,EAAA,EAAD,OACxBV,EAAAlB,EAAAmB,cAAC3E,EAAD,CAAea,YAAasD,KAAKvD,MAAMC,eAEzC6D,EAAAlB,EAAAmB,cAACD,EAAAlB,EAAM+B,SAAP,CAAgBC,SAAUd,EAAAlB,EAAAmB,cAACS,EAAA,EAAD,OACxBV,EAAAlB,EAAAmB,cAACrE,EAAD,CACEO,YAAasD,KAAKvD,MAAMC,YACxB4E,MAAOtB,KAAKvD,MAAME,WAClB4E,SAAUvB,KAAK/C,0BACfuE,SAAUxB,KAAKtC,0BACfd,YAAaoD,KAAKvD,MAAMG,YACxB6E,cAAezB,KAAKrC,yBAM5BuD,EACEX,EAAAlB,EAAAmB,cAACD,EAAAlB,EAAM+B,SAAP,CAAgBC,SAAUd,EAAAlB,EAAAmB,cAACS,EAAA,EAAD,OACxBV,EAAAlB,EAAAmB,cAACjE,EAAD,CACEG,YAAasD,KAAKvD,MAAMC,YACxBgF,UAAW1B,KAAKvD,MAAME,WACtBgF,eAAgB3B,KAAKpC,sBACrBgE,iBAAkB5B,KAAKnC,4BAM3BmC,KAAKvD,MAAMK,UACboE,EAAeX,EAAAlB,EAAAmB,cAACS,EAAA,EAAD,OAGfV,EAAAlB,EAAAmB,cAACD,EAAAlB,EAAM+B,SAAP,CAAgBC,SAAUd,EAAAlB,EAAAmB,cAACS,EAAA,EAAD,OACxBV,EAAAlB,EAAAmB,cAACpE,EAAD,CAAOyF,KAAM7B,KAAKvD,MAAMI,WAAYiF,MAAO9B,KAAKpC,uBAC7CsD,GAEFZ,UApImByB,aA2KbC,sBAAiBxF,EAAekD,sCC/Q/C,IAAAuC,EAAAlG,EAAA,IAEMmG,EAFNnG,EAAAoG,EAAAF,GAE2BvC,EAAM0C,OAAQ,CACvCC,QAAS,uDAGIH,mHCJFI,EAAoB,CAC/BjC,MAAO,GACPF,OAAQ,GACRD,MAAO,GACPE,KAAM,IACNmC,KAAM,GAED,SAAShF,EAAcb,GAC5B,OACGqB,OAAOC,QAAQtB,GACbuB,IAAI,SAAAC,GAAoB,IAAAC,EAAAJ,OAAAyE,EAAA,EAAAzE,CAAAG,EAAA,GAAlBG,EAAkBF,EAAA,GAAXG,EAAWH,EAAA,GACvB,OAAOmE,EAAkBjE,GAASC,IAEnCmE,OAAO,SAACC,EAAKC,GAAN,OAAcD,EAAMC,GAAK,GAAKL,EAAkBC,MAC1DK,QAAQ,qCCdL,SAASpF,EAAkBd,GAChC,OAAOqB,OAAO8E,OAAOnG,GAAaoG,KAAK,SAAAxE,GAAK,OAAc,IAAVA,IADlDvC,EAAAgH,EAAAC,EAAA,sBAAAxF,4FCCMpB,EAAQN,eAAK,kBACjBO,QAAAC,IAAA,CAAAP,EAAAC,EAAA,GAAAD,EAAAC,EAAA,KAAAC,KAAAF,EAAAG,KAAA,YAwEa8F,IA5Df,SACEiB,EACAvD,GAEA,gBAAAwD,GAAA,SAAAC,IAAA,IAAAC,EAAAjG,EAAAY,OAAAsF,EAAA,EAAAtF,CAAAiC,KAAAmD,GAAA,QAAAG,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAxG,EAAAY,OAAA6F,EAAA,EAAA7F,CAAAiC,MAAAoD,EAAArF,OAAA8F,EAAA,EAAA9F,CAAAoF,IAAAW,KAAAC,MAAAX,EAAA,CAAApD,MAAAzB,OAAAkF,MACShH,MAAgC,CACrCO,MAAO,MAFXG,EAKU6G,IAAqB,KAL/B7G,EAOU8G,IAAqB,KAP/B9G,EAqCS+G,eAAiB,WACtB/G,EAAKM,SAAS,CAAET,MAAO,QAtC3BG,EAAA,OAAAY,OAAAoG,EAAA,EAAApG,CAAAoF,EAAAD,GAAAnF,OAAAqG,EAAA,EAAArG,CAAAoF,EAAA,EAAAkB,IAAA,qBAAAC,MAAA,WAS8B,IAAAC,EAAAvE,KAC1BA,KAAKgE,IAAMtE,EAAM8E,aAAaC,QAAQC,IACpC,SAAAV,GAEE,OADAO,EAAK9G,SAAS,CAAET,MAAO,OAChBgH,GAET,SAAAhH,GACE,MAAMA,IAGVgD,KAAKiE,IAAMvE,EAAM8E,aAAavF,SAASyF,IACrC,SAAAV,GAAG,OAAIA,GACP,SAAAhH,GAEE,MADAuH,EAAK9G,SAAS,CAAET,UACVA,MAvBd,CAAAqH,IAAA,uBAAAC,MAAA,WA6BqB,OAAbtE,KAAKgE,KACPtE,EAAM8E,aAAaC,QAAQE,MAAM3E,KAAKgE,KAEvB,OAAbhE,KAAKiE,KACPvE,EAAM8E,aAAavF,SAAS0F,MAAM3E,KAAKiE,OAjC7C,CAAAI,IAAA,SAAAC,MAAA,WA0CI,OACEM,EAAAvF,EAAAmB,cAAAoE,EAAAvF,EAAA8B,SAAA,KACGnB,KAAKvD,MAAMO,MACV4H,EAAAvF,EAAAmB,cAACpE,EAAD,CAAOyF,OAAQ7B,KAAKvD,MAAMO,MAAO8E,MAAO9B,KAAKkE,gBAC1ClE,KAAKvD,MAAMO,MAAM6H,SAElB,KACJD,EAAAvF,EAAAmB,cAACyC,EAAqBjD,KAAKtB,YAjDnCyE,EAAA,CAAsCpB,gDCpBxC,SAAA+C,GAAA,IAAAC,EAAA,oBAAAC,QAAA,kBAAAA,OAAAC,SAAA,SAAAC,GACA,cAAAA,GACC,SAAAA,GACD,OAAAA,GAAA,oBAAAF,QAAAE,EAAAC,cAAAH,QAAAE,IAAAF,OAAAI,UAAA,gBAAAF,GAkBA,SAAAG,EAAA5I,EAAA6I,EAAAC,EAAAC,EAAAC,EAAAC,GACAH,IAAA7B,MAAAiC,QAAAF,GAGA,SAAAhJ,EAAA6I,EAAAC,EAAAC,EAAAC,EAAAC,GAGA,IAFA,IAAAE,EAAAC,KAAAC,IAAAL,EAAAjC,OAAAkC,EAAAlC,QAEAuC,EAAA,EAAiBA,EAAAH,EAAYG,IAC7B,GAAAtJ,EAAAuJ,SAAAD,IAAAN,EAAAM,KAAAL,EAAAK,GAAA,CACA,IAAAE,EAAAX,EAAA/G,OAAAwH,GACAR,EAAA3G,KAAA,CACAsH,GAAA,UACAD,OACA3B,MAAAoB,EAAAK,KAEAP,EAAA5G,KAAA,CACAsH,GAAA,UACAD,OACA3B,MAAAmB,EAAAM,KAKA,GAAAH,EAAAF,EAAAlC,OAAA,CAEA,QAAA2C,EAAAP,EAAyBO,EAAAT,EAAAlC,OAAyB2C,IAAA,CAClD,IAAAC,EAAAd,EAAA/G,OAAA4H,GAEAZ,EAAA3G,KAAA,CACAsH,GAAA,MACAD,KAAAG,EACA9B,MAAAoB,EAAAS,KAIAX,EAAA5G,KAAA,CACAsH,GAAA,UACAD,KAAAX,EAAA/G,OAAA,UACA+F,MAAAmB,EAAAjC,cAEG,GAAAoC,EAAAH,EAAAjC,OAAA,CAEH+B,EAAA3G,KAAA,CACAsH,GAAA,UACAD,KAAAX,EAAA/G,OAAA,UACA+F,MAAAoB,EAAAlC,SAGA,QAAA6C,EAAAT,EAA0BS,EAAAZ,EAAAjC,OAAwB6C,IAAA,CAClD,IAAAC,EAAAhB,EAAA/G,OAAA8H,GAEAb,EAAA5G,KAAA,CACAsH,GAAA,MACAD,KAAAK,EACAhC,MAAAmB,EAAAY,OArDAE,CAAA9J,EAAA6I,EAAAC,EAAAC,EAAAC,EAAAC,GA2DA,SAAAjJ,EAAA6I,EAAAC,EAAAC,EAAAC,EAAAC,GACAc,EAAA/J,EAAAuJ,SAAA,SAAA3B,EAAAoC,GACA,IAAAC,EAAAjB,EAAApB,GACAC,EAAAoB,EAAArB,GACA6B,EAAAO,EAAApC,KAAAoB,EAAA,yBACA,GAAAiB,IAAAjB,GAAA,YAAAS,EAAA,CACA,IAAAD,EAAAX,EAAA/G,OAAA8F,GACAkB,EAAA3G,KAAA,WAAAsH,EAAA,CACAA,KACAD,QACK,CACLC,KACAD,OACA3B,UAEAkB,EAAA5G,KAAA,QAAAsH,EAAA,CACAA,GAAA,SACAD,QACK,WAAAC,EAAA,CACLA,GAAA,MACAD,OACA3B,MAAAoC,GACK,CACLR,GAAA,UACAD,OACA3B,MAAAoC,OApFoIC,CAAAlK,EAAA6I,EAAAC,EAAAC,EAAAC,EAAAC,IAiIpI,IAjJAR,EAAAb,EAAAC,EAiJAsC,EAAA,qBAAA5B,cAAA,kBAjJAV,GAiJyF,GAjJzFD,EAiJyF,mBAjJzFa,EAiJA,IA/IAnH,OAAA8I,eAAA3B,EAAAb,EAAA,CACAC,QACAwC,YAAA,EACAC,cAAA,EACAC,UAAA,IAGA9B,EAAAb,GAAAC,EAGAY,GAsIA+B,EAAA,qBAAAjC,cAAA,sCACAkC,EAAA,oHAIA,IACAC,IADA,qBAAArC,GAAyE,mBAFzE,aAEyEsC,MAEzEC,EAAA,qBAAAC,OAAA,qBAAAC,QAsBA,SAAAC,EAAAlD,GACA,QAAAA,OAAA2C,GAGA,SAAAQ,EAAAnD,GACA,IAAAA,EAAA,SACA,oCAAAA,EAAA,YAAAS,EAAAT,IAAA,SACA,GAAAZ,MAAAiC,QAAArB,GAAA,SACA,IAAAoD,EAAA3J,OAAA4J,eAAArD,GACA,cAAAoD,OAAA3J,OAAAqH,UAkBA,IAAAwC,EAAA7J,OAAA6J,QAAA,SAAAC,EAAAvD,GACA,QAAAD,KAAAC,EACAwD,EAAAxD,EAAAD,KACAwD,EAAAxD,GAAAC,EAAAD,IAIA,OAAAwD,GAGA,SAAAE,EAAAzD,GACA,GAAAZ,MAAAiC,QAAArB,GAAA,OAAAA,EAAA0D,QACA,IAAAH,OAAAI,IAAA3D,EAAA4D,UAAAnK,OAAAqE,OAAA,SACA,OAAAwF,EAAAC,EAAAvD,GAGA,SAAAkC,EAAAlC,EAAA6D,GACA,GAAAzE,MAAAiC,QAAArB,GACA,QAAAyB,EAAA,EAAmBA,EAAAzB,EAAAd,OAAkBuC,IACrCoC,EAAApC,EAAAzB,EAAAyB,SAGA,QAAA1B,KAAAC,EACA6D,EAAA9D,EAAAC,EAAAD,IAKA,SAAAyD,EAAAM,EAAAC,GACA,OAAAtK,OAAAqH,UAAAkD,eAAAxE,KAAAsE,EAAAC,GAIA,SAAAE,EAAAhG,EAAA0D,EAAAV,EAAAC,GACA,GAAAgC,EAAAjF,GAAA,CACA,IAAA9F,EAAA8F,EAAA0E,GAEA,QAAAxK,EAAA+L,SAAA,CACA,QAAA/L,EAAAgM,UAAA,OAAAhM,EAAAiM,KACAjM,EAAAgM,WAAA,EACA,IAAAE,EAYA,SAAAD,EAAAjM,EAAAwJ,EAAAV,EAAAC,GACA,IAAAjD,EAAA9F,EAAA8F,KAUA,OATAiE,EAAAkC,EAAA,SAAAL,EAAA/D,GACA,GAAAA,IAAA/B,EAAA8F,GAAA,CAGA,IAAAO,EAAArD,IAAAuC,EAAArL,EAAAuJ,SAAAqC,GAEAK,EAAAL,GAAAE,EAAAjE,EAAAsE,GAAA3C,EAAA1H,OAAA8J,GAAAO,GAAArD,EAAAC,MA3EAlB,EA8EAoE,EA7EAvB,GACApJ,OAAA8K,OAAAvE,GAGAA,EALA,IAAAA,EAuDAwE,CAAAzB,EAAA5K,EAAAiM,KAAAjM,EAAAiM,KAAAX,EAAAxF,GAAA9F,EAAAwJ,EAAAV,EAAAC,GAEA,OADAH,EAAA5I,EAAAwJ,EAAAV,EAAAC,EAAA/I,EAAA8F,KAAAoG,GACAA,EAEA,OAAAlM,EAAA8F,KAKA,OAiBA,SAAAwG,EAAAC,GAGA,IAAAvB,EAAAuB,GAAA,OACA,GAAAjL,OAAAkL,SAAAD,GAAA,OACAxC,EAAAwC,EAAA,SAAAjD,EAAAmD,GACA1B,EAAA0B,GACAF,EAAAjD,GAAAwC,EAAAW,GACKH,EAAAG,KA1BLH,CAAAxG,GACAA,EA6BA,SAAA4G,EAAAC,EAAAC,GAEA,OAAAD,IAAAC,EACA,IAAAD,GAAA,EAAAA,IAAA,EAAAC,EAEAD,OAAAC,MAKA,IAAAC,EAAA,KACAC,EAAA,CACA5J,IAmDA,SAAAlD,EAAA4L,GACA,GAAAA,IAAApB,EAAA,OAAAxK,EAEA,GAAAA,EAAA+L,SAAA,CACA,IAAAlE,EAAA7H,EAAAiM,KAAAL,GACA,OAAA/D,IAAA7H,EAAA8F,KAAA8F,IAAAZ,EAAAnD,GAEA7H,EAAAiM,KAAAL,GAAAmB,EAAA/M,EAAA6H,GACAA,EAEA,GAAAwD,EAAArL,EAAA6M,QAAAjB,GAAA,OAAA5L,EAAA6M,QAAAjB,GACA,IAAAoB,EAAAhN,EAAA8F,KAAA8F,GACA,OAAAb,EAAAiC,IAAAhC,EAAAgC,GAAAhN,EAAA6M,QAAAjB,GAAAmB,EAAA/M,EAAAgN,GACAA,GA/DA3B,IAAA,SAAAD,EAAAQ,GACA,OAAAA,KAAAqB,EAAA7B,IAEA8B,QAAA,SAAA9B,GACA,OAAAN,QAAAoC,QAAAD,EAAA7B,KAEA+B,IA6DA,SAAAnN,EAAA4L,EAAA/D,GACA,IAAA7H,EAAA+L,SAAA,CAIA,IAAAqB,EAAAvF,EAAA6E,EAAA1M,EAAA8F,KAAA8F,GAAA/D,QAAA7H,EAAA6M,QAAAjB,GAAAc,EAAA1M,EAAA8F,KAAA8F,GAAA/D,IAAA+D,KAAA5L,EAAA8F,KACA,GAAAsH,EAAA,SACAC,EAAArN,GAKA,OAFAA,EAAAuJ,SAAAqC,IAAA,EACA5L,EAAAiM,KAAAL,GAAA/D,GACA,GAxEAyF,eA2EA,SAAAtN,EAAA4L,GAIA,OAHA5L,EAAAuJ,SAAAqC,IAAA,EACAyB,EAAArN,UACAA,EAAAiM,KAAAL,IACA,GA9EA2B,yBAiFA,SAAAvN,EAAA4L,GACA,IAAA4B,EAAAxN,EAAA+L,SAAA/L,EAAAiM,KAAAZ,EAAArL,EAAA6M,QAAAjB,GAAA5L,EAAA6M,QAAA7M,EAAA8F,KACA2H,EAAA3C,QAAAyC,yBAAAC,EAAA5B,IACA6B,GAAAxG,MAAAiC,QAAAsE,IAAA,WAAA5B,IAAA6B,EAAAnD,cAAA,GACA,OAAAmD,GApFArD,eAuFA,WACA,UAAAsD,MAAA,iEAvFAC,eAAA,WACA,UAAAD,MAAA,gDAGAE,EAAA,GAgCA,SAAAX,EAAAjN,GACA,WAAAA,EAAA+L,SAAA/L,EAAAiM,KAAAjM,EAAA8F,KAqDA,SAAAuH,EAAArN,GACAA,EAAA+L,WACA/L,EAAA+L,UAAA,EACA/L,EAAAiM,KAAAX,EAAAtL,EAAA8F,MAEAqF,EAAAnL,EAAAiM,KAAAjM,EAAA6M,SAEA7M,EAAAuM,QAAAc,EAAArN,EAAAuM,SAKA,SAAAQ,EAAAc,EAAA/H,GACA,GAAAiF,EAAAjF,GAAA,UAAA4H,MAAA,0BACA,IAAA1N,EAlFA,SAAAuM,EAAAzG,GACA,OACAiG,UAAA,EAEAxC,SAAA,GAEAyC,WAAA,EACAO,SACAzG,OACAmG,UAAAT,EACAqB,QAAA,IAwEAiB,CAAAD,EAAA/H,GACAiI,EAAA9G,MAAAiC,QAAApD,GAAA+E,MAAAmD,UAAA,CAAAhO,GAAA4N,GAAA/C,MAAAmD,UAAAhO,EAAA8M,GAEA,OADAD,EAAA1K,KAAA4L,GACAA,QAtGAhE,EAAA+C,EAAA,SAAAlF,EAAAqG,GACAL,EAAAhG,GAAA,WAEA,OADAd,UAAA,GAAAA,UAAA,MACAmH,EAAA3G,MAAA/D,KAAAuD,cAIA8G,EAAAN,eAAA,SAAAtN,EAAA4L,GACA,GAAAsC,MAAAC,SAAAvC,IAAA,UAAA8B,MAAA,2DAAA9B,GACA,OAAAkB,EAAAQ,eAAAjG,KAAA9D,KAAAvD,EAAA,GAAA4L,IAGAgC,EAAAT,IAAA,SAAAnN,EAAA4L,EAAA/D,GACA,cAAA+D,GAAAsC,MAAAC,SAAAvC,IAAA,UAAA8B,MAAA,oEAAA9B,GACA,OAAAkB,EAAAK,IAAA9F,KAAA9D,KAAAvD,EAAA,GAAA4L,EAAA/D,IA2IA,IAAAuG,EAAA,GACAC,EAAA,KAkBA,SAAAC,EAAAtO,GACA,OAAAA,EAAAuO,QAAAvO,EAAAiM,KAAAjM,EAAA8F,KA8BA,SAAA0I,EAAAxO,GACAA,EAAA+L,WACA/L,EAAA+L,UAAA,EACA/L,EAAAuM,QAAAiC,EAAAxO,EAAAuM,SAIA,SAAAkC,EAAAzO,GACAA,EAAAuO,UACAvO,EAAAuO,SAAA,EACAvO,EAAAiM,KAAAX,EAAAtL,EAAA8F,OAIA,SAAA4I,EAAAnC,EAAAzG,GACA,IAAAiI,EAAAzC,EAAAxF,GACAiE,EAAAjE,EAAA,SAAAwD,GASA,IAAAsC,EARAtK,OAAA8I,eAAA2D,EAAA,GAAAzE,EASA8E,EADAxC,EARA,GAAAtC,KASA8E,EAAAxC,GAAA,CACAtB,cAAA,EACAD,YAAA,EACAnH,IAAA,WACA,OAzDA,SAAAlD,EAAA4L,GACA+C,EAAA3O,GACA,IAAA6H,EAAAyG,EAAAtO,GAAA4L,GAEA,OAAA5L,EAAA4O,YAAA/G,IAAA7H,EAAA8F,KAAA8F,IAAAZ,EAAAnD,IAGA4G,EAAAzO,GACAA,EAAAiM,KAAAL,GAAA8C,EAAA1O,EAAA6H,IAGAA,EA8CAgH,CAAAtL,KAAAiH,GAAAoB,IAEAuB,IAAA,SAAAtF,IA7CA,SAAA7H,EAAA4L,EAAA/D,GAIA,GAHA8G,EAAA3O,GACAA,EAAAuJ,SAAAqC,IAAA,GAEA5L,EAAA+L,SAAA,CACA,GAAAW,EAAA4B,EAAAtO,GAAA4L,GAAA/D,GAAA,OACA2G,EAAAxO,GACAyO,EAAAzO,GAGAA,EAAAiM,KAAAL,GAAA/D,EAoCAiH,CAAAvL,KAAAiH,GAAAoB,EAAA/D,SAdA,IAkLAuD,EAAAQ,EAAA/D,EAlLA7H,EAlEA,SAAAuM,EAAAwB,EAAAjI,GACA,OACAiG,UAAA,EACAxC,SAAA,GAEAgF,SAAA,EACAhC,SACAzG,OACAiI,QACA9B,UAAAT,EACAuD,UAAA,EACAH,YAAA,EACA5C,WAAA,GAsDAgD,CAAAzC,EAAAwB,EAAAjI,GAGA,OA+KAsF,EAjLA2C,EAiLAnC,EAjLApB,EAiLA3C,EAjLA7H,EAkLAsB,OAAA8I,eAAAgB,EAAAQ,EAAA,CACA/D,QACAwC,YAAA,EACAE,UAAA,IApLA8D,EAAAlM,KAAAnC,GACA+N,EAgBA,SAAAY,EAAA3O,GACA,QAAAA,EAAA+O,SAAA,UAAArB,MAAA,uHAAAuB,KAAAC,UAAAlP,EAAAiM,MAAAjM,EAAA8F,OAsEA,SAAAqJ,EAAAnP,GAOA,IANA,IAAA8F,EAAA9F,EAAA8F,KACAiI,EAAA/N,EAAA+N,MAGAqB,EAAA9N,OAAA8N,KAAArB,GAEAzE,EAAA8F,EAAArI,OAAA,EAA+BuC,GAAA,EAAQA,IAEvC,QAAAkC,IAAA1F,EAAAsJ,EAAA9F,MAAA+B,EAAAvF,EAAAsJ,EAAA9F,IACA,SAMA,OAAA8F,EAAArI,SAAAzF,OAAA8N,KAAAtJ,GAAAiB,OAGA,SAAAsI,EAAArP,GACA,IAAA+N,EAAA/N,EAAA+N,MACA,GAAAA,EAAAhH,SAAA/G,EAAA8F,KAAAiB,OAAA,SAQA,IAAA0G,EAAAnM,OAAAiM,yBAAAQ,IAAAhH,OAAA,GAEA,SAAA0G,KAAAvK,KAKA,SAAAoM,EAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAArB,EACAA,EAAA,GACA,IAAAvF,EAAA2G,GAAA,GACA1G,EAAA0G,GAAA,GAEA,IAEA,IAAAE,EAAAjB,OAAAlD,EAAA+D,GAEAK,EAAAJ,EAAAnI,KAAAsI,KAEA5F,EAAAsE,EAAA,SAAAwB,EAAA7P,GACAA,EAAA4O,YAAA,IAEA,IAAA1C,OAAA,EAEA,QAAAV,IAAAoE,OAAAD,EAAA,CAEA,GAAAA,EAAAnF,GAAAuB,SAAA,UAAA2B,MAAAjD,GACAyB,EAAAJ,EAAA8D,GAEA9G,IACAA,EAAA3G,KAAA,CACAsH,GAAA,UACAD,KAAA,GACA3B,MAAAqE,IAEAnD,EAAA5G,KAAA,CACAsH,GAAA,UACAD,KAAA,GACA3B,MAAA0H,UAIAE,GAxHA,SAAAK,EAAAC,GACA,GAAAA,GAAA,iCAAAA,EAAA,YAAAzH,EAAAyH,IAAA,CACA,IAAA/P,EAAA+P,EAAAvF,GACA,GAAAxK,EAAA,CACA,IAAA+N,EAAA/N,EAAA+N,MACAjI,EAAA9F,EAAA8F,KACAyD,EAAAvJ,EAAAuJ,SAEA,GAAAtC,MAAAiC,QAAA6G,IAoBG,GAAAV,EAAArP,GAAA,CAIH,GAHAwO,EAAAxO,GACAuJ,EAAAxC,QAAA,EAEAgH,EAAAhH,OAAAjB,EAAAiB,OACA,QAAAuC,EAAAyE,EAAAhH,OAAgCuC,EAAAxD,EAAAiB,OAAiBuC,IACjDC,EAAAD,IAAA,OAGA,QAAAI,EAAA5D,EAAAiB,OAAgC2C,EAAAqE,EAAAhH,OAAmB2C,IACnDH,EAAAG,IAAA,EAIA,QAAAE,EAAA,EAAqBA,EAAAmE,EAAAhH,OAAoB6C,SAEzC4B,IAAAjC,EAAAK,IAAAkG,EAAA/B,EAAAnE,UAlCAtI,OAAA8N,KAAArB,GAAAiC,QAAA,SAAApI,QAEA4D,IAAA1F,EAAA8B,IAAAyD,EAAAvF,EAAA8B,GAGO2B,EAAA3B,IAEPkI,EAAA/B,EAAAnG,KAJA2B,EAAA3B,IAAA,EACA4G,EAAAxO,MAOAsB,OAAA8N,KAAAtJ,GAAAkK,QAAA,SAAApI,QAEA4D,IAAAuC,EAAAnG,IAAAyD,EAAA0C,EAAAnG,KACA2B,EAAA3B,IAAA,EACA4G,EAAAxO,QA+FA8P,CAAAH,GAvIA,WAIA,QAAArG,EAAA+E,EAAAtH,OAAA,EAAiCuC,GAAA,EAAQA,IAAA,CACzC,IAAAtJ,EAAAqO,EAAA/E,IAEA,IAAAtJ,EAAA+L,WACA9E,MAAAiC,QAAAlJ,EAAA8F,MACAuJ,EAAArP,IAAAwO,EAAAxO,GACOmP,EAAAnP,IAAAwO,EAAAxO,KA8HPiQ,GAEA/D,EAAAJ,EAAA6D,EAAA,GAAA7G,EAAAC,GAQA,OAJAgB,EAAAsE,EAAA,SAAAwB,EAAA7P,GACAA,EAAA+O,UAAA,IAEAU,KAAA3G,EAAAC,GACAmD,EACG,QACHmC,EAAAqB,GAwBA,SAAA9O,EAAA2O,EAAAC,EAAAC,GAEA,GAAA3I,UAAAC,OAAA,GAAAD,UAAAC,OAAA,YAAA2G,MAAA,yCAAA5G,UAAAC,QAEA,uBAAAwI,GAAA,oBAAAC,EAAA,CACA,IAAAU,EAAAV,EACAW,EAAAZ,EACA,kBACA,QAAA1I,EAAAC,UAAAC,OAAAC,EAAAC,MAAAJ,EAAA,EAAAA,EAAA,KAAAK,EAAA,EAAwFA,EAAAL,EAAaK,IACrGF,EAAAE,EAAA,GAAAJ,UAAAI,GAIA,OAAAtG,EADAkG,UAAAC,OAAA,QAAAyE,IAAA1E,UAAA,GAAAA,UAAA,GAAAoJ,EACA,SAAArP,GACA,OAAAsP,EAAA9I,KAAAC,MAAA6I,EAAA,CAAAtP,KAAAiB,OAAAkF,OAOA,uBAAAwI,EAAA,UAAA9B,MAAA,4FACA,QAAAlC,IAAAiE,GAAA,oBAAAA,EAAA,UAAA/B,MAAA,oEAGA,IAAA1C,EAAAuE,GAAA,CACA,IAAAK,EAAAJ,EAAAD,GACA,YAAA/D,IAAAoE,EAAAL,EAAAa,EAAAR,GAIA,GAAA7E,EAAAwE,GAAA,CACA,IAAAc,EAAAb,EAAAnI,KAAAkI,KAEA,YAAA/D,IAAA6E,EAAAd,EAAAa,EAAAC,GAGA,OAAAD,EAjlBAxF,EAiPA,SAAA2E,EAAAC,EAAAC,GACA,IAAAa,EAAAzD,EACAA,EAAA,GACA,IAAA/D,EAAA2G,GAAA,GACA1G,EAAA0G,GAAA,GAEA,IAEA,IAAAE,EAAA5C,OAAAvB,EAAA+D,GAEAK,EAAAJ,EAAAnI,KAAAsI,KAEAzD,OAAA,EAEA,QAAAV,IAAAoE,OAAAD,EAAA,CAEA,GAAAA,EAAAnF,GAAAuB,SAAA,UAAA2B,MAAAjD,GAEAyB,EAAAJ,EAAA8D,GAEA9G,IACAA,EAAA3G,KAAA,CACAsH,GAAA,UACAD,KAAA,GACA3B,MAAAqE,IAEAnD,EAAA5G,KAAA,CACAsH,GAAA,UACAD,KAAA,GACA3B,MAAA0H,UAIArD,EAAAJ,EAAA6D,EAAA,GAAA7G,EAAAC,GAQA,OAJAgB,EAAA8C,EAAA,SAAAgD,EAAAU,GACA,OAAAA,EAAAC,WAEAf,KAAA3G,EAAAC,GACAmD,EACG,QACHW,EAAAyD,GAqTAG,CAAAlB,EAAAC,EAAAC,GAAAH,EAAAC,EAAAC,EAAAC,IAGA,SAAAW,EAAAlE,GACA,OAAAA,IAAA/B,OAAAqB,EAAAU,EAGAtL,EA3pBA,SAAAC,EAAAiI,GACA,QAAAQ,EAAA,EAAiBA,EAAAR,EAAA/B,OAAoBuC,IAAA,CACrC,IAAAoH,EAAA5H,EAAAQ,GACAE,EAAAkH,EAAAlH,KAEA,OAAAA,EAAAzC,QAAA,YAAA2J,EAAAjH,GACA5I,EAAA6P,EAAA7I,UACK,CAGL,IAFA,IAAA/B,EAAAjF,EAEA8P,EAAA,EAAuBA,EAAAnH,EAAAzC,OAAA,EAAuB4J,IAE9C,KADA7K,IAAA0D,EAAAmH,MACA,iCAAA7K,EAAA,YAAAwC,EAAAxC,IAAA,UAAA4H,MAAA,6CAAAlE,EAAAxH,KAAA,MAGA,IAAA4F,EAAA4B,IAAAzC,OAAA,GAEA,OAAA2J,EAAAjH,IACA,cACA,UAEA3D,EAAA8B,GAAA8I,EAAA7I,MACA,MAEA,aACA,GAAAZ,MAAAiC,QAAApD,GAAA,CACA,GAAA8B,IAAA9B,EAAAiB,OAAA,EAA0D,UAAA2G,MAAA,2DAAA9F,EAAA,aAAA9B,EAAAiB,QAA1DjB,EAAAiB,QAAA,cACWjB,EAAA8B,GAEX,MAEA,QACA,UAAA8F,MAAA,gCAAAgD,EAAAjH,MAKA,OAAA5I,IAynBe0F,EAAA","file":"static/js/BurgerBuilder.993867f7.chunk.js","sourcesContent":["import { updatePurchasable } from '../../shared/updatePurchasable';\r\nimport React, { Component, lazy } from 'react';\r\n\r\nimport { AxiosResponse } from 'axios';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport axios from '../../axios-orders';\r\nimport Retry from '../../components/Retry/Retry';\r\nimport Loader from '../../components/UI/Loader/Loader';\r\nimport withErrorHandler from '../../HOCs/withErrorHandler';\r\nimport { getTotalPrice } from '../../shared/getTotalPrice';\r\nimport produce from 'immer';\r\n\r\nconst BurgerDisplay = lazy(() =>\r\n  import(/* webpackChunkName: \"BurgerDisplay\", webpackPrefetch: true */\r\n  '../../components/Burger/BurgerDisplay/BurgerDisplay'),\r\n);\r\nconst BuildControls = lazy(() =>\r\n  import(/* webpackChunkName: \"BuildControls\", webpackPrefetch: true */\r\n  '../../components/Burger/BuildControls/BuildControls'),\r\n);\r\nconst Modal = lazy(() =>\r\n  import(/* webpackChunkName: \"Modal\" */ '../../components/UI/Modal/Modal'),\r\n);\r\nconst OrderSummary = lazy(() =>\r\n  import(/* webpackChunkName: \"OrderSummary\" */ '../../components/OrderSummary/OrderSummary'),\r\n);\r\n\r\n/**\r\n * @export\r\n * @interface Iingredients\r\n */\r\nexport interface Iingredients {\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  salad: number;\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  bacon: number;\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  cheese: number;\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  meat: number;\r\n}\r\n/**\r\n * @export\r\n * @interface IBurgerBuilderState\r\n */\r\nexport interface IBurgerBuilderState {\r\n  /**\r\n   * @type {(Iingredients | null)}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  ingredients: Iingredients | null;\r\n  /**\r\n   * @type {string}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  totalPrice: string;\r\n  /**\r\n   * @type {boolean}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  purchasable: boolean;\r\n  /**\r\n   * @type {boolean}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  purchasing: boolean;\r\n  /**\r\n   * @type {boolean}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  loading: boolean;\r\n  /**\r\n   * @type {string[]}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  orders: string[];\r\n  /**\r\n   * @type {(Error | null | false)}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  error: Error | null | false;\r\n}\r\n\r\n/**\r\n * A burger display and controls container\r\n * @class BurgerBuilder\r\n * @extends {Component<{}, IBurgerBuilderState>}\r\n */\r\nclass BurgerBuilder extends Component<\r\n  RouteComponentProps,\r\n  IBurgerBuilderState\r\n> {\r\n  /*  tslint:disable:object-literal-sort-keys */\r\n  public state: IBurgerBuilderState = {\r\n    ingredients: null,\r\n    totalPrice: '4',\r\n    purchasable: false,\r\n    purchasing: false,\r\n    loading: false,\r\n    orders: [],\r\n    error: null,\r\n  };\r\n  /*  tslint:enable:object-literal-sort-keys */\r\n  /**\r\n   * componentDidMount\r\n   */\r\n  public componentDidMount() {\r\n    this.fetchIngredients();\r\n  }\r\n\r\n  public ingredientIncreaseHandler = (type: keyof Iingredients): void => {\r\n    if (!this.state.ingredients) {\r\n      return;\r\n    }\r\n    const nextState = produce(this.state, draft => {\r\n      // if (!draft.ingredients || draft.ingredients[type] <= 0) {\r\n      //   return draft;\r\n      // }\r\n      draft.ingredients![type] += 1;\r\n      draft.totalPrice = getTotalPrice(draft.ingredients!);\r\n      draft.purchasable = updatePurchasable(draft.ingredients!);\r\n    });\r\n    this.setState(nextState);\r\n  };\r\n  public ingredientDecreaseHandler = (type: keyof Iingredients) => {\r\n    if (!this.state.ingredients) {\r\n      return;\r\n    }\r\n    const nextState = produce(this.state, draft => {\r\n      // if (!draft.ingredients || draft.ingredients[type] <= 0) {\r\n      //   return draft;\r\n      // }\r\n      draft.ingredients![type] -= 1;\r\n      draft.totalPrice = getTotalPrice(draft.ingredients!);\r\n      draft.purchasable = updatePurchasable(draft.ingredients!);\r\n    });\r\n    this.setState(nextState);\r\n  };\r\n\r\n  public purchaseStartHandler = () => {\r\n    this.setState({ purchasing: true });\r\n  };\r\n  public purchaseCancelHandler = () => {\r\n    this.setState({ purchasing: false });\r\n  };\r\n  public purchaseContinueHandler = () => {\r\n    if (!this.state.ingredients) {\r\n      return;\r\n    }\r\n    const newQueryString = (Object.entries(this.state.ingredients) as Array<\r\n      [keyof Iingredients, number]\r\n    >)\r\n      .map(([igKey, igVal,]) => `${encodeURIComponent(igKey)}=${igVal}`)\r\n      .join('&');\r\n\r\n    this.props.history.push({\r\n      pathname: '/checkout',\r\n      search: '?' + newQueryString,\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    let burger = this.state.error ? (\r\n      <Retry\r\n        retryHandler={this.fetchIngredients}\r\n        mainMessage=\"Ingredients Failed To Load. Please \"\r\n        additionalMessage={\r\n          <span\r\n            style={{ color: 'blue', cursor: 'pointer' }}\r\n            onClick={this.offline}\r\n          >\r\n            work offline for now?\r\n          </span>\r\n        }\r\n      />\r\n    ) : (\r\n      <Loader />\r\n    );\r\n\r\n    let orderSummary = null;\r\n\r\n    if (this.state.ingredients) {\r\n      burger = (\r\n        <>\r\n          <React.Suspense fallback={<Loader />}>\r\n            <BurgerDisplay ingredients={this.state.ingredients} />\r\n          </React.Suspense>\r\n          <React.Suspense fallback={<Loader />}>\r\n            <BuildControls\r\n              ingredients={this.state.ingredients}\r\n              price={this.state.totalPrice}\r\n              increase={this.ingredientIncreaseHandler}\r\n              decrease={this.ingredientDecreaseHandler}\r\n              purchasable={this.state.purchasable}\r\n              purchaseStart={this.purchaseStartHandler}\r\n            />\r\n          </React.Suspense>\r\n        </>\r\n      );\r\n\r\n      orderSummary = (\r\n        <React.Suspense fallback={<Loader />}>\r\n          <OrderSummary\r\n            ingredients={this.state.ingredients}\r\n            totalCost={this.state.totalPrice}\r\n            purchaseCancel={this.purchaseCancelHandler}\r\n            purchaseContinue={this.purchaseContinueHandler}\r\n          />\r\n        </React.Suspense>\r\n      );\r\n    }\r\n\r\n    if (this.state.loading) {\r\n      orderSummary = <Loader />;\r\n    }\r\n    return (\r\n      <React.Suspense fallback={<Loader />}>\r\n        <Modal show={this.state.purchasing} hider={this.purchaseCancelHandler}>\r\n          {orderSummary}\r\n        </Modal>\r\n        {burger}\r\n      </React.Suspense>\r\n    );\r\n  }\r\n\r\n  private fetchIngredients = async () => {\r\n    this.setState({ error: null });\r\n    try {\r\n      const response: AxiosResponse<Iingredients> = await axios.get(\r\n        '/ingredients.json',\r\n      );\r\n      const { data: newIngredients } = response;\r\n      const newTotalPrice = getTotalPrice(newIngredients);\r\n      this.setState({\r\n        ingredients: newIngredients,\r\n        purchasable: updatePurchasable(newIngredients),\r\n        totalPrice: newTotalPrice,\r\n      });\r\n    } catch (error) {\r\n      // tslint:disable-next-line:no-console\r\n      this.setState({\r\n        error,\r\n      });\r\n    }\r\n  };\r\n  private offline = () => {\r\n    this.setState({\r\n      error: false,\r\n      ingredients: {\r\n        bacon: 0,\r\n        cheese: 0,\r\n        meat: 0,\r\n        salad: 0,\r\n      },\r\n      totalPrice: '4',\r\n    });\r\n  };\r\n}\r\n\r\nexport default withErrorHandler(BurgerBuilder, axios);\r\n","import axios from 'axios';\r\n\r\nconst axiosOrderInstance = axios.create( {\r\n  baseURL: 'https://react-burger-builder-8d6de.firebaseio.com/',\r\n} );\r\n\r\nexport default axiosOrderInstance;\r\n","import { Iingredients } from '../containers/BurgerBuilder/BurgerBuilder';\r\n\r\nexport const INGREDIENT_PRICES = {\r\n  salad: 0.5,\r\n  cheese: 0.6,\r\n  bacon: 0.8,\r\n  meat: 1.4,\r\n  base: 4\r\n};\r\nexport function getTotalPrice(ingredients: Iingredients) {\r\n  return (\r\n    (Object.entries(ingredients) as Array<[keyof Iingredients, number]>)\r\n      .map(([igKey, igVal]) => {\r\n        return INGREDIENT_PRICES[igKey] * igVal;\r\n      })\r\n      .reduce((acc, val) => acc + val, 0) + INGREDIENT_PRICES.base\r\n  ).toFixed(2);\r\n}\r\n","import { Iingredients } from '../containers/BurgerBuilder/BurgerBuilder';\r\n\r\nexport function updatePurchasable(ingredients: Iingredients): boolean {\r\n  return Object.values(ingredients).some(igVal => igVal !== 0);\r\n}\r\n","import { AxiosInstance } from 'axios';\r\nimport React, { Component, ComponentType, lazy } from 'react';\r\n\r\nconst Modal = lazy(() =>\r\n  import(/* webpackChunkName: \"Modal\" */ '../components/UI/Modal/Modal')\r\n);\r\n\r\nexport interface IWithErrorHandlerState {\r\n  error: Error | null;\r\n}\r\n\r\n/** @template P\r\n * @param {ComponentType<P>} WrappedComponent\r\n * @param {AxiosInstance} axios\r\n * @returns\r\n */\r\nfunction withErrorHandler<P extends {}>(\r\n  WrappedComponent: ComponentType<P>,\r\n  axios: AxiosInstance\r\n) {\r\n  return class WithErrorHandler extends Component<P> {\r\n    public state: IWithErrorHandlerState = {\r\n      error: null\r\n    };\r\n\r\n    private req: number | null = null;\r\n\r\n    private res: number | null = null;\r\n\r\n    public componentWillMount() {\r\n      this.req = axios.interceptors.request.use(\r\n        req => {\r\n          this.setState({ error: null });\r\n          return req;\r\n        },\r\n        error => {\r\n          throw error;\r\n        }\r\n      );\r\n      this.res = axios.interceptors.response.use(\r\n        req => req,\r\n        error => {\r\n          this.setState({ error });\r\n          throw error;\r\n        }\r\n      );\r\n    }\r\n\r\n    public componentWillUnmount() {\r\n      if (this.req !== null) {\r\n        axios.interceptors.request.eject(this.req);\r\n      }\r\n      if (this.res !== null) {\r\n        axios.interceptors.response.eject(this.res);\r\n      }\r\n    }\r\n\r\n    public errorConfirmed = () => {\r\n      this.setState({ error: null });\r\n    };\r\n\r\n    public render() {\r\n      return (\r\n        <>\r\n          {this.state.error ? (\r\n            <Modal show={!!this.state.error} hider={this.errorConfirmed}>\r\n              {this.state.error.message}\r\n            </Modal>\r\n          ) : null}\r\n          <WrappedComponent {...this.props} />\r\n        </>\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport default withErrorHandler;\r\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar defineProperty = function defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nfunction generatePatches(state, basepath, patches, inversePatches, baseValue, resultValue) {\n  if (patches) if (Array.isArray(baseValue)) generateArrayPatches(state, basepath, patches, inversePatches, baseValue, resultValue);else generateObjectPatches(state, basepath, patches, inversePatches, baseValue, resultValue);\n}\n\nfunction generateArrayPatches(state, basepath, patches, inversePatches, baseValue, resultValue) {\n  var shared = Math.min(baseValue.length, resultValue.length);\n\n  for (var i = 0; i < shared; i++) {\n    if (state.assigned[i] && baseValue[i] !== resultValue[i]) {\n      var path = basepath.concat(i);\n      patches.push({\n        op: \"replace\",\n        path: path,\n        value: resultValue[i]\n      });\n      inversePatches.push({\n        op: \"replace\",\n        path: path,\n        value: baseValue[i]\n      });\n    }\n  }\n\n  if (shared < resultValue.length) {\n    // stuff was added\n    for (var _i = shared; _i < resultValue.length; _i++) {\n      var _path = basepath.concat(_i);\n\n      patches.push({\n        op: \"add\",\n        path: _path,\n        value: resultValue[_i]\n      });\n    }\n\n    inversePatches.push({\n      op: \"replace\",\n      path: basepath.concat(\"length\"),\n      value: baseValue.length\n    });\n  } else if (shared < baseValue.length) {\n    // stuff was removed\n    patches.push({\n      op: \"replace\",\n      path: basepath.concat(\"length\"),\n      value: resultValue.length\n    });\n\n    for (var _i2 = shared; _i2 < baseValue.length; _i2++) {\n      var _path2 = basepath.concat(_i2);\n\n      inversePatches.push({\n        op: \"add\",\n        path: _path2,\n        value: baseValue[_i2]\n      });\n    }\n  }\n}\n\nfunction generateObjectPatches(state, basepath, patches, inversePatches, baseValue, resultValue) {\n  each(state.assigned, function (key, assignedValue) {\n    var origValue = baseValue[key];\n    var value = resultValue[key];\n    var op = !assignedValue ? \"remove\" : key in baseValue ? \"replace\" : \"add\";\n    if (origValue === baseValue && op === \"replace\") return;\n    var path = basepath.concat(key);\n    patches.push(op === \"remove\" ? {\n      op: op,\n      path: path\n    } : {\n      op: op,\n      path: path,\n      value: value\n    });\n    inversePatches.push(op === \"add\" ? {\n      op: \"remove\",\n      path: path\n    } : op === \"remove\" ? {\n      op: \"add\",\n      path: path,\n      value: origValue\n    } : {\n      op: \"replace\",\n      path: path,\n      value: origValue\n    });\n  });\n}\n\nfunction applyPatches(draft, patches) {\n  for (var i = 0; i < patches.length; i++) {\n    var patch = patches[i];\n    var path = patch.path;\n\n    if (path.length === 0 && patch.op === \"replace\") {\n      draft = patch.value;\n    } else {\n      var base = draft;\n\n      for (var _i3 = 0; _i3 < path.length - 1; _i3++) {\n        base = base[path[_i3]];\n        if (!base || (typeof base === \"undefined\" ? \"undefined\" : _typeof(base)) !== \"object\") throw new Error(\"Cannot apply patch, path doesn't resolve: \" + path.join(\"/\"));\n      }\n\n      var key = path[path.length - 1];\n\n      switch (patch.op) {\n        case \"replace\":\n        case \"add\":\n          // TODO: add support is not extensive, it does not support insertion or `-` atm!\n          base[key] = patch.value;\n          break;\n\n        case \"remove\":\n          if (Array.isArray(base)) {\n            if (key === base.length - 1) base.length -= 1;else throw new Error(\"Remove can only remove the last key of an array, index: \" + key + \", length: \" + base.length);\n          } else delete base[key];\n\n          break;\n\n        default:\n          throw new Error(\"Unsupported patch operation: \" + patch.op);\n      }\n    }\n  }\n\n  return draft;\n}\n\nvar NOTHING = typeof Symbol !== \"undefined\" ? Symbol(\"immer-nothing\") : defineProperty({}, \"immer-nothing\", true);\nvar PROXY_STATE = typeof Symbol !== \"undefined\" ? Symbol(\"immer-proxy-state\") : \"__$immer_state\";\nvar RETURNED_AND_MODIFIED_ERROR = \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\";\n\nfunction verifyMinified() {}\n\nvar inProduction = typeof process !== \"undefined\" && process.env.NODE_ENV === \"production\" || verifyMinified.name !== \"verifyMinified\";\nvar autoFreeze = !inProduction;\nvar useProxies = typeof Proxy !== \"undefined\" && typeof Reflect !== \"undefined\";\n/**\n * Automatically freezes any state trees generated by immer.\n * This protects against accidental modifications of the state tree outside of an immer function.\n * This comes with a performance impact, so it is recommended to disable this option in production.\n * It is by default enabled.\n *\n * @returns {void}\n */\n\nfunction setAutoFreeze(enableAutoFreeze) {\n  autoFreeze = enableAutoFreeze;\n}\n\nfunction setUseProxies(value) {\n  useProxies = value;\n}\n\nfunction getUseProxies() {\n  return useProxies;\n}\n\nfunction isProxy(value) {\n  return !!value && !!value[PROXY_STATE];\n}\n\nfunction isProxyable(value) {\n  if (!value) return false;\n  if ((typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) !== \"object\") return false;\n  if (Array.isArray(value)) return true;\n  var proto = Object.getPrototypeOf(value);\n  return proto === null || proto === Object.prototype;\n}\n\nfunction freeze(value) {\n  if (autoFreeze) {\n    Object.freeze(value);\n  }\n\n  return value;\n}\n\nfunction original(value) {\n  if (value && value[PROXY_STATE]) {\n    return value[PROXY_STATE].base;\n  } // otherwise return undefined\n\n}\n\nvar assign = Object.assign || function assign(target, value) {\n  for (var key in value) {\n    if (has(value, key)) {\n      target[key] = value[key];\n    }\n  }\n\n  return target;\n};\n\nfunction shallowCopy(value) {\n  if (Array.isArray(value)) return value.slice();\n  var target = value.__proto__ === undefined ? Object.create(null) : {};\n  return assign(target, value);\n}\n\nfunction each(value, cb) {\n  if (Array.isArray(value)) {\n    for (var i = 0; i < value.length; i++) {\n      cb(i, value[i]);\n    }\n  } else {\n    for (var key in value) {\n      cb(key, value[key]);\n    }\n  }\n}\n\nfunction has(thing, prop) {\n  return Object.prototype.hasOwnProperty.call(thing, prop);\n} // given a base object, returns it if unmodified, or return the changed cloned if modified\n\n\nfunction finalize(base, path, patches, inversePatches) {\n  if (isProxy(base)) {\n    var state = base[PROXY_STATE];\n\n    if (state.modified === true) {\n      if (state.finalized === true) return state.copy;\n      state.finalized = true;\n      var result = finalizeObject(useProxies ? state.copy : state.copy = shallowCopy(base), state, path, patches, inversePatches);\n      generatePatches(state, path, patches, inversePatches, state.base, result);\n      return result;\n    } else {\n      return state.base;\n    }\n  }\n\n  finalizeNonProxiedObject(base);\n  return base;\n}\n\nfunction finalizeObject(copy, state, path, patches, inversePatches) {\n  var base = state.base;\n  each(copy, function (prop, value) {\n    if (value !== base[prop]) {\n      // if there was an assignment on this property, we don't need to generate\n      // patches for the subtree\n      var _generatePatches = patches && !has(state.assigned, prop);\n\n      copy[prop] = finalize(value, _generatePatches && path.concat(prop), _generatePatches && patches, inversePatches);\n    }\n  });\n  return freeze(copy);\n}\n\nfunction finalizeNonProxiedObject(parent) {\n  // If finalize is called on an object that was not a proxy, it means that it is an object that was not there in the original\n  // tree and it could contain proxies at arbitrarily places. Let's find and finalize them as well\n  if (!isProxyable(parent)) return;\n  if (Object.isFrozen(parent)) return;\n  each(parent, function (i, child) {\n    if (isProxy(child)) {\n      parent[i] = finalize(child);\n    } else finalizeNonProxiedObject(child);\n  });\n}\n\nfunction is(x, y) {\n  // From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n} // @ts-check\n\n\nvar proxies = null;\nvar objectTraps = {\n  get: get$1,\n  has: function has$$1(target, prop) {\n    return prop in source(target);\n  },\n  ownKeys: function ownKeys(target) {\n    return Reflect.ownKeys(source(target));\n  },\n  set: set$1,\n  deleteProperty: deleteProperty,\n  getOwnPropertyDescriptor: getOwnPropertyDescriptor,\n  defineProperty: defineProperty$1,\n  setPrototypeOf: function setPrototypeOf() {\n    throw new Error(\"Immer does not support `setPrototypeOf()`.\");\n  }\n};\nvar arrayTraps = {};\neach(objectTraps, function (key, fn) {\n  arrayTraps[key] = function () {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\n\narrayTraps.deleteProperty = function (state, prop) {\n  if (isNaN(parseInt(prop))) throw new Error(\"Immer does not support deleting properties from arrays: \" + prop);\n  return objectTraps.deleteProperty.call(this, state[0], prop);\n};\n\narrayTraps.set = function (state, prop, value) {\n  if (prop !== \"length\" && isNaN(parseInt(prop))) throw new Error(\"Immer does not support setting non-numeric properties on arrays: \" + prop);\n  return objectTraps.set.call(this, state[0], prop, value);\n};\n\nfunction createState(parent, base) {\n  return {\n    modified: false,\n    // this tree is modified (either this object or one of it's children)\n    assigned: {},\n    // true: value was assigned to these props, false: was removed\n    finalized: false,\n    parent: parent,\n    base: base,\n    copy: undefined,\n    proxies: {}\n  };\n}\n\nfunction source(state) {\n  return state.modified === true ? state.copy : state.base;\n}\n\nfunction get$1(state, prop) {\n  if (prop === PROXY_STATE) return state;\n\n  if (state.modified) {\n    var value = state.copy[prop];\n    if (value === state.base[prop] && isProxyable(value)) // only create proxy if it is not yet a proxy, and not a new object\n      // (new objects don't need proxying, they will be processed in finalize anyway)\n      return state.copy[prop] = createProxy(state, value);\n    return value;\n  } else {\n    if (has(state.proxies, prop)) return state.proxies[prop];\n    var _value = state.base[prop];\n    if (!isProxy(_value) && isProxyable(_value)) return state.proxies[prop] = createProxy(state, _value);\n    return _value;\n  }\n}\n\nfunction set$1(state, prop, value) {\n  if (!state.modified) {\n    // Optimize based on value's truthiness. Truthy values are guaranteed to\n    // never be undefined, so we can avoid the `in` operator. Lastly, truthy\n    // values may be proxies, but falsy values are never proxies.\n    var isUnchanged = value ? is(state.base[prop], value) || value === state.proxies[prop] : is(state.base[prop], value) && prop in state.base;\n    if (isUnchanged) return true;\n    markChanged(state);\n  }\n\n  state.assigned[prop] = true;\n  state.copy[prop] = value;\n  return true;\n}\n\nfunction deleteProperty(state, prop) {\n  state.assigned[prop] = false;\n  markChanged(state);\n  delete state.copy[prop];\n  return true;\n}\n\nfunction getOwnPropertyDescriptor(state, prop) {\n  var owner = state.modified ? state.copy : has(state.proxies, prop) ? state.proxies : state.base;\n  var descriptor = Reflect.getOwnPropertyDescriptor(owner, prop);\n  if (descriptor && !(Array.isArray(owner) && prop === \"length\")) descriptor.configurable = true;\n  return descriptor;\n}\n\nfunction defineProperty$1() {\n  throw new Error(\"Immer does not support defining properties on draft objects.\");\n}\n\nfunction markChanged(state) {\n  if (!state.modified) {\n    state.modified = true;\n    state.copy = shallowCopy(state.base); // copy the proxies over the base-copy\n\n    assign(state.copy, state.proxies); // yup that works for arrays as well\n\n    if (state.parent) markChanged(state.parent);\n  }\n} // creates a proxy for plain objects / arrays\n\n\nfunction createProxy(parentState, base) {\n  if (isProxy(base)) throw new Error(\"Immer bug. Plz report.\");\n  var state = createState(parentState, base);\n  var proxy = Array.isArray(base) ? Proxy.revocable([state], arrayTraps) : Proxy.revocable(state, objectTraps);\n  proxies.push(proxy);\n  return proxy.proxy;\n}\n\nfunction produceProxy(baseState, producer, patchListener) {\n  var previousProxies = proxies;\n  proxies = [];\n  var patches = patchListener && [];\n  var inversePatches = patchListener && [];\n\n  try {\n    // create proxy for root\n    var rootProxy = createProxy(undefined, baseState); // execute the producer function\n\n    var returnValue = producer.call(rootProxy, rootProxy); // and finalize the modified proxy\n\n    var result = void 0; // check whether the draft was modified and/or a value was returned\n\n    if (returnValue !== undefined && returnValue !== rootProxy) {\n      // something was returned, and it wasn't the proxy itself\n      if (rootProxy[PROXY_STATE].modified) throw new Error(RETURNED_AND_MODIFIED_ERROR); // we need to finalize the return value in case it's a subset of the draft\n\n      result = finalize(returnValue);\n\n      if (patches) {\n        patches.push({\n          op: \"replace\",\n          path: [],\n          value: result\n        });\n        inversePatches.push({\n          op: \"replace\",\n          path: [],\n          value: baseState\n        });\n      }\n    } else {\n      result = finalize(rootProxy, [], patches, inversePatches);\n    } // revoke all proxies\n\n\n    each(proxies, function (_, p) {\n      return p.revoke();\n    });\n    patchListener && patchListener(patches, inversePatches);\n    return result;\n  } finally {\n    proxies = previousProxies;\n  }\n} // @ts-check\n\n\nvar descriptors = {};\nvar states = null;\n\nfunction createState$1(parent, proxy, base) {\n  return {\n    modified: false,\n    assigned: {},\n    // true: value was assigned to these props, false: was removed\n    hasCopy: false,\n    parent: parent,\n    base: base,\n    proxy: proxy,\n    copy: undefined,\n    finished: false,\n    finalizing: false,\n    finalized: false\n  };\n}\n\nfunction source$1(state) {\n  return state.hasCopy ? state.copy : state.base;\n}\n\nfunction _get(state, prop) {\n  assertUnfinished(state);\n  var value = source$1(state)[prop];\n\n  if (!state.finalizing && value === state.base[prop] && isProxyable(value)) {\n    // only create a proxy if the value is proxyable, and the value was in the base state\n    // if it wasn't in the base state, the object is already modified and we will process it in finalize\n    prepareCopy(state);\n    return state.copy[prop] = createProxy$1(state, value);\n  }\n\n  return value;\n}\n\nfunction _set(state, prop, value) {\n  assertUnfinished(state);\n  state.assigned[prop] = true; // optimization; skip this if there is no listener\n\n  if (!state.modified) {\n    if (is(source$1(state)[prop], value)) return;\n    markChanged$1(state);\n    prepareCopy(state);\n  }\n\n  state.copy[prop] = value;\n}\n\nfunction markChanged$1(state) {\n  if (!state.modified) {\n    state.modified = true;\n    if (state.parent) markChanged$1(state.parent);\n  }\n}\n\nfunction prepareCopy(state) {\n  if (state.hasCopy) return;\n  state.hasCopy = true;\n  state.copy = shallowCopy(state.base);\n} // creates a proxy for plain objects / arrays\n\n\nfunction createProxy$1(parent, base) {\n  var proxy = shallowCopy(base);\n  each(base, function (i) {\n    Object.defineProperty(proxy, \"\" + i, createPropertyProxy(\"\" + i));\n  });\n  var state = createState$1(parent, proxy, base);\n  createHiddenProperty(proxy, PROXY_STATE, state);\n  states.push(state);\n  return proxy;\n}\n\nfunction createPropertyProxy(prop) {\n  return descriptors[prop] || (descriptors[prop] = {\n    configurable: true,\n    enumerable: true,\n    get: function get$$1() {\n      return _get(this[PROXY_STATE], prop);\n    },\n    set: function set$$1(value) {\n      _set(this[PROXY_STATE], prop, value);\n    }\n  });\n}\n\nfunction assertUnfinished(state) {\n  if (state.finished === true) throw new Error(\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + JSON.stringify(state.copy || state.base));\n} // this sounds very expensive, but actually it is not that expensive in practice\n// as it will only visit proxies, and only do key-based change detection for objects for\n// which it is not already know that they are changed (that is, only object for which no known key was changed)\n\n\nfunction markChangesSweep() {\n  // intentionally we process the proxies in reverse order;\n  // ideally we start by processing leafs in the tree, because if a child has changed, we don't have to check the parent anymore\n  // reverse order of proxy creation approximates this\n  for (var i = states.length - 1; i >= 0; i--) {\n    var state = states[i];\n\n    if (state.modified === false) {\n      if (Array.isArray(state.base)) {\n        if (hasArrayChanges(state)) markChanged$1(state);\n      } else if (hasObjectChanges(state)) markChanged$1(state);\n    }\n  }\n}\n\nfunction markChangesRecursively(object) {\n  if (!object || (typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") return;\n  var state = object[PROXY_STATE];\n  if (!state) return;\n  var proxy = state.proxy,\n      base = state.base,\n      assigned = state.assigned;\n\n  if (!Array.isArray(object)) {\n    // Look for added keys.\n    Object.keys(proxy).forEach(function (key) {\n      // The `undefined` check is a fast path for pre-existing keys.\n      if (base[key] === undefined && !has(base, key)) {\n        assigned[key] = true;\n        markChanged$1(state);\n      } else if (!assigned[key]) {\n        // Only untouched properties trigger recursion.\n        markChangesRecursively(proxy[key]);\n      }\n    }); // Look for removed keys.\n\n    Object.keys(base).forEach(function (key) {\n      // The `undefined` check is a fast path for pre-existing keys.\n      if (proxy[key] === undefined && !has(proxy, key)) {\n        assigned[key] = false;\n        markChanged$1(state);\n      }\n    });\n  } else if (hasArrayChanges(state)) {\n    markChanged$1(state);\n    assigned.length = true;\n\n    if (proxy.length < base.length) {\n      for (var i = proxy.length; i < base.length; i++) {\n        assigned[i] = false;\n      }\n    } else {\n      for (var _i = base.length; _i < proxy.length; _i++) {\n        assigned[_i] = true;\n      }\n    }\n\n    for (var _i2 = 0; _i2 < proxy.length; _i2++) {\n      // Only untouched indices trigger recursion.\n      if (assigned[_i2] === undefined) markChangesRecursively(proxy[_i2]);\n    }\n  }\n}\n\nfunction hasObjectChanges(state) {\n  var base = state.base,\n      proxy = state.proxy; // Search for added keys. Start at the back, because non-numeric keys\n  // are ordered by time of definition on the object.\n\n  var keys = Object.keys(proxy);\n\n  for (var i = keys.length - 1; i >= 0; i--) {\n    // The `undefined` check is a fast path for pre-existing keys.\n    if (base[keys[i]] === undefined && !has(base, keys[i])) {\n      return true;\n    }\n  } // Since no keys have been added, we can compare lengths to know if an\n  // object has been deleted.\n\n\n  return keys.length !== Object.keys(base).length;\n}\n\nfunction hasArrayChanges(state) {\n  var proxy = state.proxy;\n  if (proxy.length !== state.base.length) return true; // See #116\n  // If we first shorten the length, our array interceptors will be removed.\n  // If after that new items are added, result in the same original length,\n  // those last items will have no intercepting property.\n  // So if there is no own descriptor on the last position, we know that items were removed and added\n  // N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n  // the last one\n\n  var descriptor = Object.getOwnPropertyDescriptor(proxy, proxy.length - 1); // descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\n  if (descriptor && !descriptor.get) return true; // For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\n  return false;\n}\n\nfunction produceEs5(baseState, producer, patchListener) {\n  var prevStates = states;\n  states = [];\n  var patches = patchListener && [];\n  var inversePatches = patchListener && [];\n\n  try {\n    // create proxy for root\n    var rootProxy = createProxy$1(undefined, baseState); // execute the thunk\n\n    var returnValue = producer.call(rootProxy, rootProxy); // and finalize the modified proxy\n\n    each(states, function (_, state) {\n      state.finalizing = true;\n    });\n    var result = void 0; // check whether the draft was modified and/or a value was returned\n\n    if (returnValue !== undefined && returnValue !== rootProxy) {\n      // something was returned, and it wasn't the proxy itself\n      if (rootProxy[PROXY_STATE].modified) throw new Error(RETURNED_AND_MODIFIED_ERROR);\n      result = finalize(returnValue);\n\n      if (patches) {\n        patches.push({\n          op: \"replace\",\n          path: [],\n          value: result\n        });\n        inversePatches.push({\n          op: \"replace\",\n          path: [],\n          value: baseState\n        });\n      }\n    } else {\n      if (patchListener) markChangesRecursively(rootProxy);\n      markChangesSweep(); // this one is more efficient if we don't need to know which attributes have changed\n\n      result = finalize(rootProxy, [], patches, inversePatches);\n    } // make sure all proxies become unusable\n\n\n    each(states, function (_, state) {\n      state.finished = true;\n    });\n    patchListener && patchListener(patches, inversePatches);\n    return result;\n  } finally {\n    states = prevStates;\n  }\n}\n\nfunction createHiddenProperty(target, prop, value) {\n  Object.defineProperty(target, prop, {\n    value: value,\n    enumerable: false,\n    writable: true\n  });\n}\n/**\n * produce takes a state, and runs a function against it.\n * That function can freely mutate the state, as it will create copies-on-write.\n * This means that the original state will stay unchanged, and once the function finishes, the modified state is returned\n *\n * @export\n * @param {any} baseState - the state to start with\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the base state if nothing was modified\n */\n\n\nfunction produce(baseState, producer, patchListener) {\n  // prettier-ignore\n  if (arguments.length < 1 || arguments.length > 3) throw new Error(\"produce expects 1 to 3 arguments, got \" + arguments.length); // curried invocation\n\n  if (typeof baseState === \"function\" && typeof producer !== \"function\") {\n    var initialState = producer;\n    var recipe = baseState;\n    return function () {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var currentState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n      return produce(currentState, function (draft) {\n        return recipe.call.apply(recipe, [draft, draft].concat(args));\n      });\n    };\n  } // prettier-ignore\n\n\n  {\n    if (typeof producer !== \"function\") throw new Error(\"if first argument is not a function, the second argument to produce should be a function\");\n    if (patchListener !== undefined && typeof patchListener !== \"function\") throw new Error(\"the third argument of a producer should not be set or a function\");\n  } // avoid proxying anything except plain objects and arrays\n\n  if (!isProxyable(baseState)) {\n    var returnValue = producer(baseState);\n    return returnValue === undefined ? baseState : normalizeResult(returnValue);\n  } // See #100, don't nest producers\n\n\n  if (isProxy(baseState)) {\n    var _returnValue = producer.call(baseState, baseState);\n\n    return _returnValue === undefined ? baseState : normalizeResult(_returnValue);\n  }\n\n  return normalizeResult(getUseProxies() ? produceProxy(baseState, producer, patchListener) : produceEs5(baseState, producer, patchListener));\n}\n\nfunction normalizeResult(result) {\n  return result === NOTHING ? undefined : result;\n}\n\nvar applyPatches$1 = produce(applyPatches);\nvar nothing = NOTHING;\nexport { produce, applyPatches$1 as applyPatches, nothing, setAutoFreeze, setUseProxies, original, isProxy as isDraft };\nexport default produce;"],"sourceRoot":""}