{"version":3,"sources":["containers/BurgerBuilder/BurgerBuilder.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"names":["immer","__webpack_require__","e","then","bind","BurgerDisplay","lazy","BuildControls","Modal","Promise","all","OrderSummary","BurgerBuilder","state","ingredients","totalPrice","purchasable","purchasing","loading","orders","error","ingredientIncreaseHandler","_callee","type","produce","nextState","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","wrap","_context","prev","next","_this","abrupt","sent","default","draft","getTotalPrice","updatePurchasable","setState","stop","this","ingredientDecreaseHandler","_callee2","_context2","purchaseStartHandler","purchaseCancelHandler","purchaseContinueHandler","newQueryString","Object","entries","map","_ref3","_ref4","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","igKey","igVal","concat","encodeURIComponent","join","props","history","push","pathname","search","fetchIngredients","_callee3","response","newIngredients","newTotalPrice","_context3","axios","get","data","t0","offline","bacon","cheese","meat","salad","burger","react__WEBPACK_IMPORTED_MODULE_9___default","createElement","_components_Retry_Retry__WEBPACK_IMPORTED_MODULE_11__","retryHandler","mainMessage","additionalMessage","style","color","cursor","onClick","_components_UI_Loader_Loader__WEBPACK_IMPORTED_MODULE_12__","orderSummary","Fragment","Suspense","fallback","price","increase","decrease","purchaseStart","totalCost","purchaseCancel","purchaseContinue","show","hider","Component","withErrorHandler","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","done","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","d","__webpack_exports__"],"mappings":"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","file":"static/js/BurgerBuilder.9a3a3efa.chunk.js","sourcesContent":["import { updatePurchasable } from '../../shared/updatePurchasable';\r\nimport React, { Component, lazy } from 'react';\r\n\r\nimport { AxiosResponse } from 'axios';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport axios from '../../axios-orders';\r\nimport Retry from '../../components/Retry/Retry';\r\nimport Loader from '../../components/UI/Loader/Loader';\r\nimport withErrorHandler from '../../HOCs/withErrorHandler';\r\nimport { getTotalPrice } from '../../shared/getTotalPrice';\r\n// import produce from 'immer';\r\nconst immer = import(/* webpackChunkName: \"immer\" */ 'immer');\r\n\r\nconst BurgerDisplay = lazy(() =>\r\n  import(/* webpackChunkName: \"BurgerDisplay\" */\r\n  '../../components/Burger/BurgerDisplay/BurgerDisplay'),\r\n);\r\nconst BuildControls = lazy(() =>\r\n  import(/* webpackChunkName: \"BuildControls\" */\r\n  '../../components/Burger/BuildControls/BuildControls'),\r\n);\r\nconst Modal = lazy(() =>\r\n  import(/* webpackChunkName: \"Modal\" */ '../../components/UI/Modal/Modal'),\r\n);\r\nconst OrderSummary = lazy(() =>\r\n  import(/* webpackChunkName: \"OrderSummary\" */ '../../components/OrderSummary/OrderSummary'),\r\n);\r\n\r\n/**\r\n * @export\r\n * @interface Iingredients\r\n */\r\nexport interface Iingredients {\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  salad: number;\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  bacon: number;\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  cheese: number;\r\n  /**\r\n   * @type {number}\r\n   * @memberof Iingredients\r\n   */\r\n  meat: number;\r\n}\r\n/**\r\n * @export\r\n * @interface IBurgerBuilderState\r\n */\r\nexport interface IBurgerBuilderState {\r\n  /**\r\n   * @type {(Iingredients | null)}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  ingredients: Iingredients | null;\r\n  /**\r\n   * @type {string}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  totalPrice: string;\r\n  /**\r\n   * @type {boolean}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  purchasable: boolean;\r\n  /**\r\n   * @type {boolean}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  purchasing: boolean;\r\n  /**\r\n   * @type {boolean}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  loading: boolean;\r\n  /**\r\n   * @type {string[]}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  orders: string[];\r\n  /**\r\n   * @type {(Error | null | false)}\r\n   * @memberof IBurgerBuilderState\r\n   */\r\n  error: Error | null | false;\r\n}\r\n\r\n/**\r\n * A burger display and controls container\r\n * @class BurgerBuilder\r\n * @extends {Component<{}, IBurgerBuilderState>}\r\n */\r\nclass BurgerBuilder extends Component<\r\n  RouteComponentProps,\r\n  IBurgerBuilderState\r\n> {\r\n  /*  tslint:disable:object-literal-sort-keys */\r\n  public state: IBurgerBuilderState = {\r\n    ingredients: null,\r\n    totalPrice: '4',\r\n    purchasable: false,\r\n    purchasing: false,\r\n    loading: false,\r\n    orders: [],\r\n    error: null,\r\n  };\r\n  /*  tslint:enable:object-literal-sort-keys */\r\n  /**\r\n   * componentDidMount\r\n   */\r\n  public componentDidMount() {\r\n    this.fetchIngredients();\r\n  }\r\n\r\n  public ingredientIncreaseHandler = async (type: keyof Iingredients) => {\r\n    if (!this.state.ingredients) {\r\n      return;\r\n    }\r\n    const produce = (await immer).default;\r\n    const nextState = produce(this.state, draft => {\r\n      // if (!draft.ingredients || draft.ingredients[type] <= 0) {\r\n      //   return draft;\r\n      // }\r\n      draft.ingredients![type] += 1;\r\n      draft.totalPrice = getTotalPrice(draft.ingredients!);\r\n      draft.purchasable = updatePurchasable(draft.ingredients!);\r\n    });\r\n    this.setState(nextState);\r\n  };\r\n  public ingredientDecreaseHandler = async (type: keyof Iingredients) => {\r\n    if (!this.state.ingredients) {\r\n      return;\r\n    }\r\n    const produce = (await immer).default;\r\n    const nextState = produce(this.state, draft => {\r\n      // if (!draft.ingredients || draft.ingredients[type] <= 0) {\r\n      //   return draft;\r\n      // }\r\n      draft.ingredients![type] -= 1;\r\n      draft.totalPrice = getTotalPrice(draft.ingredients!);\r\n      draft.purchasable = updatePurchasable(draft.ingredients!);\r\n    });\r\n    this.setState(nextState);\r\n  };\r\n\r\n  public purchaseStartHandler = () => {\r\n    this.setState({ purchasing: true });\r\n  };\r\n  public purchaseCancelHandler = () => {\r\n    this.setState({ purchasing: false });\r\n  };\r\n  public purchaseContinueHandler = () => {\r\n    if (!this.state.ingredients) {\r\n      return;\r\n    }\r\n    const newQueryString = (Object.entries(this.state.ingredients) as Array<\r\n      [keyof Iingredients, number]\r\n    >)\r\n      .map(([igKey, igVal,]) => `${encodeURIComponent(igKey)}=${igVal}`)\r\n      .join('&');\r\n\r\n    this.props.history.push({\r\n      pathname: '/checkout',\r\n      search: '?' + newQueryString,\r\n    });\r\n  };\r\n\r\n  public render() {\r\n    let burger = this.state.error ? (\r\n      <Retry\r\n        retryHandler={this.fetchIngredients}\r\n        mainMessage=\"Ingredients Failed To Load. Please \"\r\n        additionalMessage={\r\n          <span\r\n            style={{ color: 'blue', cursor: 'pointer' }}\r\n            onClick={this.offline}\r\n          >\r\n            work offline for now?\r\n          </span>\r\n        }\r\n      />\r\n    ) : (\r\n      <Loader />\r\n    );\r\n\r\n    let orderSummary = null;\r\n\r\n    if (this.state.ingredients) {\r\n      burger = (\r\n        <>\r\n          <React.Suspense fallback={<Loader />}>\r\n            <BurgerDisplay ingredients={this.state.ingredients} />\r\n          </React.Suspense>\r\n          <React.Suspense fallback={<Loader />}>\r\n            <BuildControls\r\n              ingredients={this.state.ingredients}\r\n              price={this.state.totalPrice}\r\n              increase={this.ingredientIncreaseHandler}\r\n              decrease={this.ingredientDecreaseHandler}\r\n              purchasable={this.state.purchasable}\r\n              purchaseStart={this.purchaseStartHandler}\r\n            />\r\n          </React.Suspense>\r\n        </>\r\n      );\r\n\r\n      orderSummary = (\r\n        <React.Suspense fallback={<Loader />}>\r\n          <OrderSummary\r\n            ingredients={this.state.ingredients}\r\n            totalCost={this.state.totalPrice}\r\n            purchaseCancel={this.purchaseCancelHandler}\r\n            purchaseContinue={this.purchaseContinueHandler}\r\n          />\r\n        </React.Suspense>\r\n      );\r\n    }\r\n\r\n    if (this.state.loading) {\r\n      orderSummary = <Loader />;\r\n    }\r\n    return (\r\n      <React.Suspense fallback={<Loader />}>\r\n        <Modal show={this.state.purchasing} hider={this.purchaseCancelHandler}>\r\n          {orderSummary}\r\n        </Modal>\r\n        {burger}\r\n      </React.Suspense>\r\n    );\r\n  }\r\n\r\n  private fetchIngredients = async () => {\r\n    this.setState({ error: null });\r\n    try {\r\n      const response: AxiosResponse<Iingredients> = await axios.get(\r\n        '/ingredients.json',\r\n      );\r\n      const { data: newIngredients } = response;\r\n      const newTotalPrice = getTotalPrice(newIngredients);\r\n      this.setState({\r\n        ingredients: newIngredients,\r\n        purchasable: updatePurchasable(newIngredients),\r\n        totalPrice: newTotalPrice,\r\n      });\r\n    } catch (error) {\r\n      // tslint:disable-next-line:no-console\r\n      this.setState({\r\n        error,\r\n      });\r\n    }\r\n  };\r\n  private offline = () => {\r\n    this.setState({\r\n      error: false,\r\n      ingredients: {\r\n        bacon: 0,\r\n        cheese: 0,\r\n        meat: 0,\r\n        salad: 0,\r\n      },\r\n      totalPrice: '4',\r\n    });\r\n  };\r\n}\r\n\r\nexport default withErrorHandler(BurgerBuilder, axios);\r\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"sourceRoot":""}