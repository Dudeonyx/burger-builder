{"version":3,"sources":["components/UI/Backdrop/Backdrop.tsx","components/UI/Backdrop/Backdrop.module.css","components/UI/Modal/Modal.tsx","components/UI/Modal/Modal.module.css","axios-orders.tsx","HOCs/AxiosErrorBoundary.tsx","containers/BurgerBuilder/BurgerBuilder.tsx"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_Backdrop_module_css__WEBPACK_IMPORTED_MODULE_1__","_Backdrop_module_css__WEBPACK_IMPORTED_MODULE_1___default","Backdrop","_ref","show","hider","a","createElement","className","styles","onClick","module","exports","r","__webpack_exports__","d","Modal","_Modal_module_css__WEBPACK_IMPORTED_MODULE_1__","_Modal_module_css__WEBPACK_IMPORTED_MODULE_1___default","_Backdrop_Backdrop__WEBPACK_IMPORTED_MODULE_2__","children","_ref$show","inlineCss","opacity","maxWidth","visibility","transform","Fragment","style","React","memo","Hide","axiosOrderInstance","axios","create","baseURL","AxiosErrorBoundary","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","interceptors","request","use","req","setState","error","response","res","errorConfirmed","state","react_default","message","Component","BurgerDisplay","lazy","e","then","bind","BuildControls","Promise","resolve","OrderSummary","INGREDIENT_PRICES","salad","cheese","bacon","meat","BurgerBuilder","ingredients","totalPrice","purchasable","purchasing","loading","orders","updatePurchasable","status","values","some","igVal","ingredientIncreaseHandler","type","newIngredients","objectSpread","newTotalPrice","ingredientDecreaseHandler","purchaseStartHandler","purchaseCancelHandler","purchaseContinueHandler","_callee","order","regenerator_default","wrap","_context","prev","next","generateOrder","post","sent","console","log","prevState","concat","data","name","t0","finish","stop","customer","address","street","city","country","phone","areaCode","email","deliveryMethod","price","toFixed","date","Date","orderSummary","Loader","Suspense","fallback","purchaseCancel","purchaseContinue","HOCs_AxiosErrorBoundary","BurgerBuilder_Modal","increase","decrease","purchaseStart"],"mappings":"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","file":"static/js/BurgerBuilder.8b482a25.chunk.js","sourcesContent":["import React, { FunctionComponent, MouseEventHandler } from 'react';\r\nimport styles from './Backdrop.module.css';\r\n\r\nexport interface IBackdropProps {\r\n  show: boolean;\r\n  hider: MouseEventHandler;\r\n}\r\n\r\nconst Backdrop: FunctionComponent<IBackdropProps> = ( { show, hider } ) => {\r\n  return show ? <div className={styles.Backdrop} onClick={hider} /> : null;\r\n};\r\n\r\nexport default Backdrop;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Backdrop\":\"Backdrop_Backdrop__2dJeJ\"};","import React, {\r\n  MouseEventHandler,\r\n  FunctionComponent,\r\n  CSSProperties,\r\n} from 'react';\r\nimport styles from './Modal.module.css';\r\nimport Backdrop from '../Backdrop/Backdrop';\r\n\r\n/** @interface */\r\nexport interface IModal {\r\n  /** A boolean indicating visibility of the modal\r\n   * @default false\r\n   */\r\n  show: boolean;\r\n  /** An event handler that sets \"show\" to false\r\n   * @default \"() => {}\"\r\n   */\r\n  hider: MouseEventHandler;\r\n}\r\n/** A reuseable Modal */\r\nexport const Modal: FunctionComponent<IModal> = ( {\r\n  children,\r\n  show = false,\r\n  hider,\r\n} ) => {\r\n  // console.log( '[Modal]' );\r\n  const inlineCss: CSSProperties = show\r\n    ? {\r\n        /* tslint:disable:ter-indent */\r\n        opacity: 1,\r\n        maxWidth: '100%',\r\n        visibility: 'unset',\r\n      }\r\n    : {\r\n        transform: 'translate(-50%, -200%)',\r\n        opacity: 0,\r\n        maxWidth: '0%',\r\n        visibility: 'hidden',\r\n      };\r\n  /* tslint:enable:ter-indent */\r\n\r\n  return (\r\n    <>\r\n      <Backdrop show={show} hider={hider} />\r\n      <div className={styles.Modal} style={inlineCss}>\r\n        {children}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo( Modal );\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__3JiWW\",\"Hide\":\"Modal_Hide__3ufiz\"};","import axios from 'axios';\r\n\r\nconst axiosOrderInstance = axios.create( {\r\n  baseURL: 'https://react-burger-builder-8d6de.firebaseio.com/',\r\n} );\r\n\r\nexport default axiosOrderInstance;\r\n","import { AxiosInstance } from 'axios';\r\nimport React, { Component } from 'react';\r\nimport { Modal } from '../components/UI/Modal/Modal';\r\n\r\nexport interface IAxiosErrorBoundaryProps {\r\n  axios: AxiosInstance;\r\n}\r\n\r\nexport interface IAxiosErrorBoundaryState {\r\n  error: null | Error;\r\n}\r\n\r\nclass AxiosErrorBoundary extends Component<\r\n  IAxiosErrorBoundaryProps,\r\n  IAxiosErrorBoundaryState\r\n> {\r\n  constructor(props: IAxiosErrorBoundaryProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      error: null,\r\n    };\r\n  }\r\n  public componentDidMount = () => {\r\n    this.props.axios.interceptors.request.use(\r\n      (req) => {\r\n        this.setState({ error: null });\r\n        return req;\r\n      },\r\n      (error) => {\r\n        throw error;\r\n      },\r\n    );\r\n\r\n    this.props.axios.interceptors.response.use(\r\n      (res) => res,\r\n      (error) => {\r\n        this.setState({ error });\r\n        throw error;\r\n      },\r\n    );\r\n  }\r\n\r\n  public errorConfirmed = () => {\r\n    this.setState({ error: null });\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <>\r\n        {this.state.error ? (\r\n          <Modal show={!!this.state.error} hider={this.errorConfirmed}>\r\n            {this.state.error.message}\r\n          </Modal>\r\n        ) : null}\r\n        {this.props.children}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AxiosErrorBoundary;\r\n","import React, { Component, lazy } from 'react';\r\n\r\nimport axios from '../../axios-orders';\r\nimport Loader from '../../components/UI/Loader/Loader';\r\nimport AxiosErrorBoundary from '../../HOCs/AxiosErrorBoundary';\r\n\r\nconst BurgerDisplay = lazy(() =>\r\n  import(/* webpackChunkName: \"BurgerDisplay\" */\r\n  '../../components/Burger/BurgerDisplay/BurgerDisplay'),\r\n);\r\nconst BuildControls = lazy(() =>\r\n  import(/* webpackChunkName: \"BuildControls\" */\r\n  '../../components/Burger/BuildControls/BuildControls'),\r\n);\r\nconst Modal = lazy(() =>\r\n  import(/* webpackChunkName: \"Modal\" */ '../../components/UI/Modal/Modal'),\r\n);\r\nconst OrderSummary = lazy(() =>\r\n  import(/* webpackChunkName: \"OrderSummary\" */ '../../components/OrderSummary/OrderSummary'),\r\n);\r\n\r\nconst INGREDIENT_PRICES = {\r\n  salad: 0.5,\r\n  // tslint:disable-next-line:object-literal-sort-keys\r\n  cheese: 0.6,\r\n  bacon: 0.8,\r\n  meat: 1.4,\r\n};\r\ninterface IBurgerBuilderState {\r\n  ingredients: Iingredients;\r\n  totalPrice: number;\r\n  purchasable: boolean;\r\n  purchasing: boolean;\r\n  loading: boolean;\r\n  orders: string[];\r\n}\r\ninterface Iingredients {\r\n  salad: number;\r\n  bacon: number;\r\n  cheese: number;\r\n  meat: number;\r\n}\r\nclass BurgerBuilder extends Component<{}, IBurgerBuilderState> {\r\n  /*  tslint:disable:object-literal-sort-keys */\r\n  public state = {\r\n    ingredients: {\r\n      salad: 0,\r\n      bacon: 0,\r\n      cheese: 0,\r\n      meat: 0,\r\n    },\r\n    totalPrice: 4,\r\n    purchasable: false,\r\n    purchasing: false,\r\n    loading: false,\r\n    orders: [],\r\n  };\r\n  /*  tslint:enable:object-literal-sort-keys */\r\n\r\n  public updatePurchasable = (ingredients: Iingredients) => {\r\n    const status = Object.values(ingredients).some((igVal) => igVal !== 0);\r\n    this.setState({\r\n      purchasable: status,\r\n    });\r\n  }\r\n\r\n  public ingredientIncreaseHandler = (type: keyof Iingredients): void => {\r\n    const newIngredients = { ...this.state.ingredients };\r\n    newIngredients[type] += 1;\r\n    const newTotalPrice = this.state.totalPrice + INGREDIENT_PRICES[type];\r\n    this.setState({\r\n      ingredients: newIngredients,\r\n      totalPrice: newTotalPrice,\r\n    });\r\n    this.updatePurchasable(newIngredients);\r\n  }\r\n  public ingredientDecreaseHandler = (type: keyof Iingredients) => {\r\n    if (this.state.ingredients[type] <= 0) {\r\n      return;\r\n    }\r\n    const newIngredients = { ...this.state.ingredients };\r\n    newIngredients[type] -= 1;\r\n    const newTotalPrice = this.state.totalPrice - INGREDIENT_PRICES[type];\r\n    this.setState({\r\n      ingredients: newIngredients,\r\n      totalPrice: newTotalPrice,\r\n    });\r\n    this.updatePurchasable(newIngredients);\r\n  }\r\n\r\n  public purchaseStartHandler = () => {\r\n    this.setState({ purchasing: true });\r\n  }\r\n  public purchaseCancelHandler = () => {\r\n    this.setState({ purchasing: false });\r\n  }\r\n  public purchaseContinueHandler = async () => {\r\n    try {\r\n      this.setState({ loading: true });\r\n      const order = this.generateOrder();\r\n      const response = await axios.post('/orders', order);\r\n      // tslint:disable-next-line:no-console\r\n      console.log(response);\r\n      this.setState((prevState) => ({\r\n        orders: prevState.orders.concat(response.data.name),\r\n      }));\r\n    } catch (error) {\r\n      // tslint:disable-next-line:no-console\r\n      console.log(error);\r\n    } finally {\r\n      this.setState({ purchasing: false, loading: false });\r\n    }\r\n  }\r\n\r\n  public generateOrder() {\r\n    /*  tslint:disable:object-literal-sort-keys */\r\n    return {\r\n      customer: {\r\n        name: 'OnyekaChukwu',\r\n        address: {\r\n          street: 'Adjenughure Street',\r\n          city: 'Effural',\r\n          state: 'Selta',\r\n          country: 'Nier',\r\n        },\r\n        phone: '123-255-8416',\r\n        areaCode: '+56',\r\n        email: 'test@testing.on',\r\n      },\r\n      deliveryMethod: 'cheapest',\r\n      ingredients: this.state.ingredients,\r\n      price: this.state.totalPrice.toFixed(2),\r\n      date: Date(),\r\n    };\r\n    /*  tslint:enable:object-literal-sort-keys */\r\n  }\r\n\r\n  public render() {\r\n    const orderSummary = this.state.loading ? (\r\n      <Loader />\r\n    ) : (\r\n      <React.Suspense fallback={<Loader />}>\r\n        <OrderSummary\r\n          ingredients={this.state.ingredients}\r\n          price={this.state.totalPrice}\r\n          purchaseCancel={this.purchaseCancelHandler}\r\n          purchaseContinue={this.purchaseContinueHandler}\r\n        />\r\n      </React.Suspense>\r\n    );\r\n    return (\r\n      <React.Suspense fallback={<Loader />}>\r\n        <AxiosErrorBoundary axios={axios}>\r\n          <Modal\r\n            show={this.state.purchasing}\r\n            hider={this.purchaseCancelHandler}\r\n          >\r\n            {orderSummary}\r\n          </Modal>\r\n          <React.Suspense fallback={<Loader />}>\r\n            <BurgerDisplay ingredients={this.state.ingredients} />\r\n          </React.Suspense>\r\n          <React.Suspense fallback={<Loader />}>\r\n            <BuildControls\r\n              ingredients={this.state.ingredients}\r\n              price={this.state.totalPrice}\r\n              increase={this.ingredientIncreaseHandler}\r\n              decrease={this.ingredientDecreaseHandler}\r\n              purchasable={this.state.purchasable}\r\n              purchaseStart={this.purchaseStartHandler}\r\n            />\r\n          </React.Suspense>\r\n        </AxiosErrorBoundary>\r\n      </React.Suspense>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BurgerBuilder;\r\n"],"sourceRoot":""}