{"version":3,"sources":["components/Order/Order.tsx","containers/Orders/Orders.tsx","containers/Orders/index.ts","shared/getTotalPrice.tsx","shared/updatePurchasable.tsx","shared/index.ts","axios-orders.tsx","HOCs/withErrorHandler.tsx"],"names":["StyledOrder","styled","div","_templateObject","Order","_ref","ingredients","totalPrice","name","id","breakdown","className","Object","entries","map","_ref2","_ref3","slicedToArray","igKey","igVal","react_default","a","createElement","key","INGREDIENT_PRICES","Fragment","toFixed","concat","base","StyledOrders","Orders_templateObject","Orders","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","fetchOrders","asyncToGenerator","regenerator_default","mark","_callee","response","data","_formattedOrders","wrap","_context","prev","next","setState","loading","axios","get","sent","formattedOrders","reverse","slice","_ref3$","customer","price","orders","t0","console","error","stop","state","allOrders","Loader","length","components_Order_Order","Component","withErrorHandler","__webpack_require__","d","__webpack_exports__","containers_Orders_Orders","salad","cheese","bacon","meat","getTotalPrice","reduce","acc","val","updatePurchasable","values","some","axios__WEBPACK_IMPORTED_MODULE_0__","axiosOrderInstance","n","create","baseURL","Modal","lazy","e","then","bind","WrappedComponent","_Component","WithErrorHandler","_getPrototypeOf2","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_len","arguments","args","Array","_key","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","req","res","errorConfirmed","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","D_github_burger_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","value","_this2","interceptors","request","use","eject","react__WEBPACK_IMPORTED_MODULE_5___default","show","hider","message"],"mappings":"+/BAMA,IAAMA,EAAcC,IAAOC,IAAVC,KA4EFC,EA9BgC,SAAAC,GAMzC,IALJC,EAKID,EALJC,YACAC,EAIIF,EAJJE,WACAC,EAGIH,EAHJG,KACAC,EAEIJ,EAFJI,GAGMC,GADFL,EADJM,UAEmBC,OAAOC,QAAQP,GAE/BQ,IAAI,SAAAC,GAAA,IAAAC,EAAAJ,OAAAK,EAAA,EAAAL,CAAAG,EAAA,GAAEG,EAAFF,EAAA,GAASG,EAATH,EAAA,UACLI,EAAAC,EAAAC,cAAA,QAAMC,IAAKd,EAAKS,EAAQC,GACrBD,EADH,MACaC,EACXC,EAAAC,EAAAC,cAAA,WACCH,EAAQK,IAAkBN,GAAS,EAClCE,EAAAC,EAAAC,cAAAF,EAAAC,EAAAI,SAAA,UAAKN,EAAQK,IAAkBN,IAAQQ,QAAQ,IAE/CN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAI,SAAA,gBAIN,OACEL,EAAAC,EAAAC,cAACtB,EAAD,KACEoB,EAAAC,EAAAC,cAAA,mBAAAK,OAAcnB,IACbE,EACDU,EAAAC,EAAAC,cAAA,wBAAgBE,IAAkBI,KAAKF,QAAQ,IAC/CN,EAAAC,EAAAC,cAAA,0BAAkBf,usBClCxB,IAAMsB,EAAe5B,IAAOC,IAAV4B,KAgCZC,cACJ,SAAAA,EAAYC,GAAqB,IAAAC,EAAA,OAAArB,OAAAsB,EAAA,EAAAtB,CAAAuB,KAAAJ,IAC/BE,EAAArB,OAAAwB,EAAA,EAAAxB,CAAAuB,KAAAvB,OAAAyB,EAAA,EAAAzB,CAAAmB,GAAAO,KAAAH,KAAMH,KAQDO,kBAAoB,WACzBN,EAAKO,eAV0BP,EAazBO,YAbyB5B,OAAA6B,EAAA,EAAA7B,CAAA8B,EAAArB,EAAAsB,KAaX,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAL,EAAArB,EAAA2B,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAGlBjB,EAAKmB,SAAS,CAAEC,SAAS,IAHPJ,EAAAE,KAAA,EAIKG,IAAMC,IAAe,gBAJ1B,OAIZV,EAJYI,EAAAO,KAKVV,EAASD,EAATC,KAEFW,EAAsC7C,OAAOC,QAAQiC,GAGxDY,UACAC,QACA7C,IACC,SAAAC,GAAA,IAAAC,EAAAJ,OAAAK,EAAA,EAAAL,CAAAG,EAAA,GACEN,EADFO,EAAA,GAAA4C,EAAA5C,EAAA,SAOO,CAAEP,KAAID,KAPboD,EAGIC,SAAYrD,KAIGF,YAPnBsD,EAIItD,YAG4BC,WAPhCqD,EAKIE,SAKR7B,EAAKmB,SAAS,CAAEW,OAAQjB,EAAMW,kBAAiBJ,SAAS,IAvBtCJ,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAe,GAAAf,EAAA,SA0BlBgB,QAAQC,MAARjB,EAAAe,IACA/B,EAAKmB,SAAS,CAAEC,SAAS,IA3BP,yBAAAJ,EAAAkB,SAAAvB,EAAAT,KAAA,aAXpBF,EAAKmC,MAAQ,CACXL,OAAQ,KACRV,SAAS,EACTI,gBAAiB,IALYxB,wEA6C/B,IAAMoC,EAAYlC,KAAKiC,MAAMf,QAC3BjC,EAAAC,EAAAC,cAACgD,EAAA,EAAD,MACEnC,KAAKiC,MAAMX,gBAAgBc,OAAS,EACtCpC,KAAKiC,MAAMX,gBAAgB3C,IAAI,SAAA+C,GAAQ,OACrCzC,EAAAC,EAAAC,cAAA,OAAKX,UAAU,eAAeY,IAAKsC,EAASpD,IAC1CW,EAAAC,EAAAC,cAACkD,EAAUX,MAGb,KAEJ,OACEzC,EAAAC,EAAAC,cAACO,EAAD,KACET,EAAAC,EAAAC,cAAA,kCACAF,EAAAC,EAAAC,cAAA,OAAKX,UAAU,YAAY0D,WA3DdI,aAyENC,cAAiB3C,EAAQuB,KCpJxCqB,EAAAC,EAAAC,EAAA,4BAAAC,iDCEatD,EAAoB,CAC/BuD,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPC,KAAM,IACNtD,KAAM,GAED,SAASuD,EAAc7E,GAC5B,OACGM,OAAOC,QAAQP,GACbQ,IAAI,SAAAT,GAAoB,IAAAU,EAAAH,OAAAK,EAAA,EAAAL,CAAAP,EAAA,GAAlBa,EAAkBH,EAAA,GAAXI,EAAWJ,EAAA,GACvB,OAAOS,EAAkBN,GAASC,IAEnCiE,OAAO,SAACC,EAAKC,GAAN,OAAcD,EAAMC,GAAK,GAAK9D,EAAkBI,MAC1DF,QAAQ,GCdL,SAAS6D,EAAkBjF,GAChC,OAAOM,OAAO4E,OAAOlF,GAAamF,KAAK,SAAAtE,GAAK,OAAc,IAAVA,ICHlDwD,EAAAC,EAAAC,EAAA,sBAAArD,IAAAmD,EAAAC,EAAAC,EAAA,sBAAAM,IAAAR,EAAAC,EAAAC,EAAA,sBAAAU,qCCAA,IAAAG,EAAAf,EAAA,IAEMgB,EAFNhB,EAAAiB,EAAAF,GAE2BpC,EAAMuC,OAAQ,CACvCC,QAAS,uDAGIH,8FCHTI,EAAQC,eAAK,kBACjBrB,EAAAsB,EAAA,GAAAC,KAAAvB,EAAAwB,KAAA,YAwEazB,IA5Df,SACE0B,EACA9C,GAEA,gBAAA+C,GAAA,SAAAC,IAAA,IAAAC,EAAAtE,EAAArB,OAAA4F,EAAA,EAAA5F,CAAAuB,KAAAmE,GAAA,QAAAG,EAAAC,UAAAnC,OAAAoC,EAAA,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAAF,EAAAE,GAAAH,UAAAG,GAAA,OAAA5E,EAAArB,OAAAkG,EAAA,EAAAlG,CAAAuB,MAAAoE,EAAA3F,OAAAmG,EAAA,EAAAnG,CAAA0F,IAAAhE,KAAA0E,MAAAT,EAAA,CAAApE,MAAAR,OAAAgF,MACSvC,MAAgC,CACrCF,MAAO,MAFXjC,EAKUgF,IAAqB,KAL/BhF,EAOUiF,IAAqB,KAP/BjF,EAqCSkF,eAAiB,WACtBlF,EAAKmB,SAAS,CAAEc,MAAO,QAtC3BjC,EAAA,OAAArB,OAAAwG,EAAA,EAAAxG,CAAA0F,EAAAD,GAAAzF,OAAAyG,EAAA,EAAAzG,CAAA0F,EAAA,EAAA/E,IAAA,qBAAA+F,MAAA,WAS8B,IAAAC,EAAApF,KAC1BA,KAAK8E,IAAM3D,EAAMkE,aAAaC,QAAQC,IACpC,SAAAT,GAEE,OADAM,EAAKnE,SAAS,CAAEc,MAAO,OAChB+C,GAET,SAAA/C,GACE,MAAMA,IAGV/B,KAAK+E,IAAM5D,EAAMkE,aAAa3E,SAAS6E,IACrC,SAAAT,GAAG,OAAIA,GACP,SAAA/C,GAEE,MADAqD,EAAKnE,SAAS,CAAEc,UACVA,MAvBd,CAAA3C,IAAA,uBAAA+F,MAAA,WA6BqB,OAAbnF,KAAK8E,KACP3D,EAAMkE,aAAaC,QAAQE,MAAMxF,KAAK8E,KAEvB,OAAb9E,KAAK+E,KACP5D,EAAMkE,aAAa3E,SAAS8E,MAAMxF,KAAK+E,OAjC7C,CAAA3F,IAAA,SAAA+F,MAAA,WA0CI,OACEM,EAAAvG,EAAAC,cAAAsG,EAAAvG,EAAAI,SAAA,KACGU,KAAKiC,MAAMF,MACV0D,EAAAvG,EAAAC,cAACyE,EAAD,CAAO8B,OAAQ1F,KAAKiC,MAAMF,MAAO4D,MAAO3F,KAAKgF,gBAC1ChF,KAAKiC,MAAMF,MAAM6D,SAElB,KACJH,EAAAvG,EAAAC,cAAC8E,EAAqBjE,KAAKH,YAjDnCsE,EAAA,CAAsC7B","file":"static/js/Orders.e3bd70a1.chunk.js","sourcesContent":["import React, { FunctionComponent } from 'react';\r\nimport { Iingredients } from '../../containers/BurgerBuilder';\r\nimport { IingredientsKeys } from '../Burger/BuildControls';\r\nimport { INGREDIENT_PRICES } from '../../shared';\r\nimport styled from 'styled-components';\r\n\r\nconst StyledOrder = styled.div`\r\n  & {\r\n    text-align: center;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 0px 10px 1px rgba(0, 0, 0, 0.658);\r\n    margin: 15px;\r\n    border-radius: 10px;\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    justify-content: center;\r\n  }\r\n\r\n  span {\r\n    text-transform: capitalize;\r\n    flex: 0.4 0.02 42%;\r\n    margin: 5px 5px;\r\n    padding: 1px;\r\n    border: 1px solid rgba(0, 0, 0, 0.226);\r\n    border-radius: 10px;\r\n    box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.459);\r\n    background-color: rgba(169, 169, 169, 0.13);\r\n  }\r\n  h4,\r\n  h5 {\r\n    flex: 1 1 100%;\r\n  }\r\n  p {\r\n    flex: 1 1 100%;\r\n    margin: 5px 0;\r\n\r\n    @media (min-width: 500px) {\r\n      span {\r\n        flex: 0.4 0.02 4.95rem;\r\n      }\r\n    }\r\n  }\r\n`;\r\ninterface IOrdersProps {\r\n  ingredients: Iingredients;\r\n  name: string;\r\n  totalPrice: string;\r\n  id: string;\r\n  className?: string;\r\n}\r\n\r\nconst Order: FunctionComponent<IOrdersProps> = ({\r\n  ingredients,\r\n  totalPrice,\r\n  name,\r\n  id,\r\n  className\r\n}) => {\r\n  const breakdown = (Object.entries(ingredients) as Array<\r\n    [IingredientsKeys, number]\r\n  >).map(([igKey, igVal]) => (\r\n    <span key={id + igKey + igVal}>\r\n      {igKey} - {igVal}\r\n      <br />\r\n      {igVal * INGREDIENT_PRICES[igKey] > 0 ? (\r\n        <>${(igVal * INGREDIENT_PRICES[igKey]).toFixed(2)}</>\r\n      ) : (\r\n        <>N/A</>\r\n      )}\r\n    </span>\r\n  ));\r\n  return (\r\n    <StyledOrder>\r\n      <h4>{`Name: ${name}`}</h4>\r\n      {breakdown}\r\n      <p>Base Cost: ${INGREDIENT_PRICES.base.toFixed(2)}</p>\r\n      <h5>Total Cost: ${totalPrice}</h5>\r\n    </StyledOrder>\r\n  );\r\n};\r\n\r\nexport default Order;\r\n","import React, { FunctionComponent, Component } from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { Iingredients } from '../BurgerBuilder';\nimport Order from '../../components/Order';\nimport axios from '../../axios-orders';\nimport Loader from '../../components/UI/Loader';\nimport withErrorHandler from '../../HOCs/withErrorHandler';\nimport styled from 'styled-components';\n// tslint:disable-next-line:no-empty-interface\nexport interface IOrdersProps extends RouteComponentProps {}\n\nexport interface IDbOrder {\n  customer: {\n    name: string;\n    address: {\n      street: string;\n      city: string;\n      state: string;\n      country: string;\n    };\n    phone: string;\n    email: string;\n  };\n  deliveryMethod: string;\n  ingredients: Iingredients;\n  date: string;\n  price: string;\n}\nexport interface IDbOrders {\n  [x: string]: IDbOrder;\n}\nexport interface IformattedOrder {\n  id: string;\n  ingredients: Iingredients;\n  name: string;\n  totalPrice: string;\n}\nexport interface IOrdersState {\n  orders: IDbOrders | null;\n  loading: boolean;\n  formattedOrders: IformattedOrder[];\n}\n\nconst StyledOrders = styled.div`\n  & {\n    display: flex;\n    flex-flow: column;\n    justify-content: space-around;\n    align-items: center;\n    width: 100%;\n    margin: 10px 0;\n  }\n  .OrderBox {\n    padding: 10px;\n    box-sizing: border-box;\n    box-shadow: 0px 0px 10px 3px rgba(0, 0, 0, 0.658);\n    margin: 15px;\n    border-radius: 20px;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: space-around;\n    align-items: center;\n    width: 90%;\n    min-height: 65vh;\n  }\n  .OrderWrapper {\n    flex: 0.3 0.2 100%;\n  }\n\n  @media (min-width: 650px) {\n    .OrderBox {\n      max-width: 600px;\n    }\n  }\n`;\nclass Orders extends Component<IOrdersProps, IOrdersState> {\n  constructor(props: IOrdersProps) {\n    super(props);\n    this.state = {\n      orders: null,\n      loading: false,\n      formattedOrders: []\n    };\n  }\n\n  public componentDidMount = () => {\n    this.fetchOrders();\n  };\n\n  private fetchOrders = async () => {\n    try {\n      type T = string;\n      this.setState({ loading: true });\n      const response = await axios.get<IDbOrders>('/orders.json');\n      const { data } = response;\n\n      const formattedOrders: IformattedOrder[] = (Object.entries(data) as Array<\n        [T, IDbOrders[T]]\n      >)\n        .reverse()\n        .slice()\n        .map(\n          ([\n            id,\n            {\n              customer: { name },\n              ingredients,\n              price: totalPrice\n            }\n          ]) => ({ id, name, ingredients, totalPrice })\n        );\n\n      this.setState({ orders: data, formattedOrders, loading: false });\n    } catch (error) {\n      // tslint:disable-next-line:no-console\n      console.error(error);\n      this.setState({ loading: false });\n    }\n  };\n\n  public render() {\n    const allOrders = this.state.loading ? (\n      <Loader />\n    ) : this.state.formattedOrders.length > 0 ? (\n      this.state.formattedOrders.map(customer => (\n        <div className=\"OrderWrapper\" key={customer.id}>\n          <Order {...customer} />\n        </div>\n      ))\n    ) : null;\n\n    return (\n      <StyledOrders>\n        <h3>Here Are Your Orders</h3>\n        <div className=\"OrderBox\">{allOrders}</div>\n      </StyledOrders>\n    );\n  }\n}\n\n// Orders.propTypes = {\n//   // bla: PropTypes.string,\n// };\n\n// Orders.defaultProps = {\n//   // bla: 'test',\n// };\n\nexport default withErrorHandler(Orders, axios);\n","export { default } from './Orders';\nexport * from './Orders';\n","import { Iingredients } from '../containers/BurgerBuilder';\r\n\r\nexport const INGREDIENT_PRICES = {\r\n  salad: 0.5,\r\n  cheese: 0.6,\r\n  bacon: 0.8,\r\n  meat: 1.4,\r\n  base: 4\r\n};\r\nexport function getTotalPrice(ingredients: Iingredients) {\r\n  return (\r\n    (Object.entries(ingredients) as Array<[keyof Iingredients, number]>)\r\n      .map(([igKey, igVal]) => {\r\n        return INGREDIENT_PRICES[igKey] * igVal;\r\n      })\r\n      .reduce((acc, val) => acc + val, 0) + INGREDIENT_PRICES.base\r\n  ).toFixed(2);\r\n}\r\n","import { Iingredients } from '../containers/BurgerBuilder';\r\n\r\nexport function updatePurchasable(ingredients: Iingredients): boolean {\r\n  return Object.values(ingredients).some(igVal => igVal !== 0);\r\n}\r\n","export * from './getTotalPrice';\r\nexport * from './updatePurchasable';\r\n","import axios from 'axios';\r\n\r\nconst axiosOrderInstance = axios.create( {\r\n  baseURL: 'https://react-burger-builder-8d6de.firebaseio.com/',\r\n} );\r\n\r\nexport default axiosOrderInstance;\r\n","import { AxiosInstance } from 'axios';\r\nimport React, { Component, ComponentType, lazy } from 'react';\r\n\r\nconst Modal = lazy(() =>\r\n  import(/* webpackChunkName: \"Modal\" */ '../components/UI/Modal')\r\n);\r\n\r\nexport interface IWithErrorHandlerState {\r\n  error: Error | null;\r\n}\r\n\r\n/** @template P\r\n * @param {ComponentType<P>} WrappedComponent\r\n * @param {AxiosInstance} axios\r\n * @returns\r\n */\r\nfunction withErrorHandler<P extends {}>(\r\n  WrappedComponent: ComponentType<P>,\r\n  axios: AxiosInstance\r\n) {\r\n  return class WithErrorHandler extends Component<P> {\r\n    public state: IWithErrorHandlerState = {\r\n      error: null\r\n    };\r\n\r\n    private req: number | null = null;\r\n\r\n    private res: number | null = null;\r\n\r\n    public componentWillMount() {\r\n      this.req = axios.interceptors.request.use(\r\n        req => {\r\n          this.setState({ error: null });\r\n          return req;\r\n        },\r\n        error => {\r\n          throw error;\r\n        }\r\n      );\r\n      this.res = axios.interceptors.response.use(\r\n        req => req,\r\n        error => {\r\n          this.setState({ error });\r\n          throw error;\r\n        }\r\n      );\r\n    }\r\n\r\n    public componentWillUnmount() {\r\n      if (this.req !== null) {\r\n        axios.interceptors.request.eject(this.req);\r\n      }\r\n      if (this.res !== null) {\r\n        axios.interceptors.response.eject(this.res);\r\n      }\r\n    }\r\n\r\n    public errorConfirmed = () => {\r\n      this.setState({ error: null });\r\n    };\r\n\r\n    public render() {\r\n      return (\r\n        <>\r\n          {this.state.error ? (\r\n            <Modal show={!!this.state.error} hider={this.errorConfirmed}>\r\n              {this.state.error.message}\r\n            </Modal>\r\n          ) : null}\r\n          <WrappedComponent {...this.props} />\r\n        </>\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport default withErrorHandler;\r\n"],"sourceRoot":""}